import{_ as A}from"./base-input.cd175c59.js";import{c as D,a as H}from"./entry.f57c7ce9.js";import{u as R}from"./fetch.3824631a.js";import{u as Z}from"./useMyFetch.182df1fb.js";import{_ as K}from"./logo.7800c418.js";import{_ as M}from"./loader.e1c57c5a.js";import{u as q}from"./authStore.ba1671ca.js";import{u as G}from"./loader.789525b7.js";import{u as J}from"./favourite.2a1eb18a.js";import{a as W}from"./trash.69e30f7e.js";import{a as m,Z as g,I as _,R as o,u as i,H as I,e as L,U as b,Q as O}from"./swiper-vue.406cf000.js";import"./v4.a960c1f4.js";const X={class:"flex justify-center pt-34 md:pt-40 h-[110vh] absolute top-0 bg-slate-300 z-40 w-full"},Y={class:"w-full max-w-md"},ee=o("div",{class:"text-3xl font-bold text-center mb-6 flex w-full justify-between"},null,-1),te={class:"bg-c-gray shadow-lg rounded px-8 pt-6 pb-8 mb-4"},ae={class:"mb-4"},se={class:"mb-6"},oe={key:0,class:"text-red-500 text-sm inter font-bold mb-4"},le={class:"flex w-full gap-5 items-center justify-between"},ue={key:0,class:"p-2 rounded-md text-white font-bold"},re=o("img",{src:M,alt:""},null,-1),ne=[re],Se={__name:"login",setup(ie){D();const p=J(),Q=W();G();const l=m(""),u=m(""),f=m("user_exist"),r=m(!1),v=m(!0),d=q(),w=H();async function z(){var e,s;try{if(!l.value||!u.value){l.value="",u.value="";return}r.value=!0;const{data:n,pending:a,status:h,error:c}=await R("http://duypbaha.com.tm/api/v1/client/user-register",{method:"POST",body:{username:l.value,password:u.value}},"$tvQ2ZBkkKn");if(console.log(c),((e=c.value)==null?void 0:e.fatal)==!1){r.value=!1,f.value="user_exist",v.value=!1;return}(s=n.value)!=null&&s.status&&await y(),a&&(r.value=!0),r.value=!1}catch(n){throw n}}async function y(){var h,c,x,k,$,S,T,V,B,C,E,U,j,F,N,P;try{if(!l.value||!u.value){l.value="",u.value="";return}r.value=!0;const{data:t,pending:de,status:ce,error:me}=await R("http://duypbaha.com.tm/api/v1/client/user/login",{method:"POST",body:{username:l.value,password:u.value}},"$hCTBEZ0wEo");d.userToken=(h=t.value)==null?void 0:h.auth,t.value.status||(v.value=!1,f.value="not_correct_data"),r.value=!1}catch(t){console.log(t)}try{if((c=d.userToken)!=null&&c.uuid)var{data:e,error:s,status:n}=await Z(`/api/v1/client/wish-list?lang=tm&user_id=${(x=d.userToken)==null?void 0:x.uuid}`);console.log(e.value.status,"wish_user.value"),e.value.status&&(($=(k=e.value)==null?void 0:k.data)!=null&&$.length)?(p.wish_items=[],console.log("[][]"),(S=e.value.data)==null||S.filter(t=>{t.images=t.img_path,p.setLocalStorage(t)})):(V=(T=e.value)==null?void 0:T.data)!=null&&V.length||(p.wish_items=[])}catch(t){console.log(t)}try{if((B=d.userToken)!=null&&B.uuid)var{data:a}=await Z(`/api/v1/client/trash?user_id=${(C=d.userToken)==null?void 0:C.uuid}&lang=tm`);(E=a.value)!=null&&E.status&&((j=(U=a.value)==null?void 0:U.data)!=null&&j.length)&&((N=(F=a.value)==null?void 0:F.data)==null||N.filter(t=>{t.images=t.img_path}),Q.trash_items.products=(P=a.value)==null?void 0:P.data),w.push("/")}catch(t){console.log(t)}}return(e,s)=>{const n=A;return g(),_("div",X,[o("div",Y,[ee,o("form",te,[o("img",{class:"mx-auto md:cursor-pointer cursor-auto",onClick:s[0]||(s[0]=a=>i(w).push(e.localePath("/"))),src:K,alt:""}),o("div",ae,[I(n,{label:e.$t("username"),id:"username",name:"username",type:"text",placeholder:"aman@example.com",modelValue:i(l),"onUpdate:modelValue":s[1]||(s[1]=a=>L(l)?l.value=a:null)},null,8,["label","modelValue"])]),o("div",se,[I(n,{label:e.$t("password"),id:"password",name:"password",type:"password",placeholder:"···········",modelValue:i(u),"onUpdate:modelValue":s[2]||(s[2]=a=>L(u)?u.value=a:null)},null,8,["label","modelValue"])]),i(v)?O("",!0):(g(),_("p",oe,b(e.$t(i(f))),1)),o("div",le,[o("button",{class:"bg-blue-700 rounded-2xl w-1/2 text-white font-bold py-2 px-4 focus:outline-none focus:shadow-outline",type:"button",onClick:y},b(e.$t("signin")),1),i(r)?(g(),_("p",ue,ne)):O("",!0),o("button",{class:"text-blue-700 border-blue-700 border-2 rounded-2xl w-1/2 font-bold py-2 px-4 focus:outline-none focus:shadow-outline",type:"button",onClick:z},b(e.$t("signup")),1)])])])])}}};export{Se as default};
