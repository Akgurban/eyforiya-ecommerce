import{_ as B}from"./base-input.ed3ba4e0.js";import{c as E,d as R,h as U,b as M}from"./entry.63f2b5d2.js";import{a as v,t as S,a2 as $,D,b as F,u as _,g as T,k as A,r as H,M as k,X as y,H as P,e as O,a3 as L,L as C}from"./swiper-vue.629ce7f2.js";import{u as N}from"./authStore.004ab34f.js";import"./v4.a960c1f4.js";const j=()=>null;function z(...i){const u=typeof i[i.length-1]=="string"?i.pop():void 0;typeof i[0]!="string"&&i.unshift(u);let[t,n,s={}]=i;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof n!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");s.server=s.server??!0,s.default=s.default??j,s.lazy=s.lazy??!1,s.immediate=s.immediate??!0;const e=E(),d=()=>e.isHydrating?e.payload.data[t]:e.static.data[t],o=()=>d()!==void 0;e._asyncData[t]||(e._asyncData[t]={data:v(d()??s.default()),pending:v(!o()),error:S(e.payload._errors,t),status:v("idle")});const a={...e._asyncData[t]};a.refresh=a.execute=(l={})=>{if(e._asyncDataPromises[t]){if(l.dedupe===!1)return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}if((l._initial||e.isHydrating&&l._initial!==!1)&&o())return d();a.pending.value=!0,a.status.value="pending";const f=new Promise((r,c)=>{try{r(n(e))}catch(g){c(g)}}).then(r=>{if(f.cancelled)return e._asyncDataPromises[t];let c=r;s.transform&&(c=s.transform(r)),s.pick&&(c=I(c,s.pick)),a.data.value=c,a.error.value=null,a.status.value="success"}).catch(r=>{if(f.cancelled)return e._asyncDataPromises[t];a.error.value=r,a.data.value=_(s.default()),a.status.value="error"}).finally(()=>{f.cancelled||(a.pending.value=!1,e.payload.data[t]=a.data.value,a.error.value&&(e.payload._errors[t]=R(a.error.value)),delete e._asyncDataPromises[t])});return e._asyncDataPromises[t]=f,e._asyncDataPromises[t]};const p=()=>a.refresh({_initial:!0}),m=s.server!==!1&&e.payload.serverRendered;{const l=T();if(l&&!l._nuxtOnBeforeMountCbs){l._nuxtOnBeforeMountCbs=[];const r=l._nuxtOnBeforeMountCbs;l&&($(()=>{r.forEach(c=>{c()}),r.splice(0,r.length)}),D(()=>r.splice(0,r.length)))}m&&e.isHydrating&&o()?(a.pending.value=!1,a.status.value=a.error.value?"error":"success"):l&&(e.payload.serverRendered&&e.isHydrating||s.lazy)&&s.immediate?l._nuxtOnBeforeMountCbs.push(p):s.immediate&&p(),s.watch&&F(s.watch,()=>a.refresh());const f=e.hook("app:data:refresh",r=>{if(!r||r.includes(t))return a.refresh()});l&&D(f)}const w=Promise.resolve(e._asyncDataPromises[t]).then(()=>a);return Object.assign(w,a),w}function I(i,u){const t={};for(const n of u)t[n]=i[n];return t}function K(i,u,t){const[n={},s]=typeof u=="string"?[{},u]:[u,t],e=n.key||U([s,_(n.baseURL),typeof i=="string"?i:"",_(n.params||n.query)]);if(!e||typeof e!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+e);if(!i)throw new Error("[nuxt] [useFetch] request is missing.");const d=e===s?"$f"+e:e,o=A(()=>{let b=i;return typeof b=="function"&&(b=b()),_(b)});if(!n.baseURL&&typeof o.value=="string"&&o.value.startsWith("//"))throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:a,lazy:p,default:m,transform:w,pick:l,watch:f,immediate:r,...c}=n,g=H({...c,cache:typeof n.cache=="boolean"?void 0:n.cache}),V={server:a,lazy:p,default:m,transform:w,pick:l,immediate:r,watch:f===!1?[]:[g,o,...f||[]]};let h;return z(d,()=>{var x;return(x=h==null?void 0:h.abort)==null||x.call(h),h=typeof AbortController<"u"?new AbortController:{},typeof o.value=="string"&&o.value.startsWith("/"),(n.$fetch||globalThis.$fetch)(o.value,{signal:h.signal,...g})},V)}const W={class:"flex justify-center items-center h-screen"},X={class:"w-full max-w-md"},q=y("h1",{class:"text-3xl font-bold text-center mb-6"},"Login",-1),J={class:"bg-c-gray shadow-lg rounded px-8 pt-6 pb-8 mb-4"},G={class:"mb-4"},Q={class:"mb-6"},Y={key:0,class:"text-red-500 text-sm inter font-bold mb-4"},re={__name:"login",setup(i){const u=v(""),t=v(""),n=v(!0),s=N(),e=M();async function d(){try{if(!u.value||!t.value){n.value=!1;return}const{data:o,error:a}=await K("/api/v1/admin/login",{method:"POST",body:JSON.stringify({user:u.value,password:t.value})},"$oSbKwuMXgn");s.userToken=o.value.data,e.push("/admin/news")}catch(o){throw o}}return(o,a)=>{const p=B;return C(),k("div",W,[y("div",X,[q,y("form",J,[y("div",G,[P(p,{label:"Username",id:"username",name:"username",type:"text",placeholder:"Username",modelValue:_(u),"onUpdate:modelValue":a[0]||(a[0]=m=>O(u)?u.value=m:null)},null,8,["modelValue"])]),y("div",Q,[P(p,{label:"Password",id:"password",name:"password",type:"password",placeholder:"Password",modelValue:_(t),"onUpdate:modelValue":a[1]||(a[1]=m=>O(t)?t.value=m:null)},null,8,["modelValue"])]),_(n)?L("",!0):(C(),k("p",Y," Please fill all the forms ")),y("div",{class:"flex items-center justify-between"},[y("button",{class:"bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button",onClick:d}," Sign In ")])])])])}}};export{re as default};
