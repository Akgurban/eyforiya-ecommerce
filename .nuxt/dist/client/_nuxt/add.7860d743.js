import{_ as w}from"./plus.a645f405.js";import{a as o,F as k,b,Z as i,I as c,u as h,R as a,Q as y,H as p,N as x,e as I,M as V}from"./swiper-vue.406cf000.js";import{_ as B}from"./base-button.0f6fb678.js";import{c as C,a as v}from"./entry.377c9c4e.js";import{u as $}from"./user.09296d70.js";import{u as z}from"./loader.0e63246b.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./fetch.096dfd57.js";import"./adminStore.e66e9b08.js";const R={class:"w-20 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},S={key:0,class:"group-hover:block hidden overlay absolute top-0 left-0 bg-black/30 w-full h-full z-[2]"},U={class:"w-20 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},F={key:0,class:"absolute top-[70%] left-1/2 transform -translate-x-1/2 -translate-y-1/2 font-bold text-white text-lg"},L={__name:"base-video-upload",props:{banner:{type:Boolean,default:!1},currentImg:{type:String,default:""},isChangable:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(d,{emit:m}){const n=d,f=o(null),e=o(null),u=o(!1);k(()=>{n.currentImg&&(e.value.src=n.currentImg)}),b(()=>n.currentImg,t=>{t||(e.value.src="")});function _(){n.isChangable&&f.value.click()}function s(t){m("update:modelValue",t.target.files[0]);const r=t.target.files[0],l=new FileReader;l.onload=g=>{e.value.src=g.target.result},l.readAsDataURL(r),u.value=!0}return(t,r)=>{const l=w;return i(),c("div",null,[h(u)?(i(),c("video",{key:0,class:"w-full aspect-video object-cover z-[1]",controls:"",autoplay:"",loop:"",muted:"",ref_key:"img",ref:e},[a("source",{ref_key:"img",ref:e,alt:""},null,512)],512)):y("",!0),a("div",x({onClick:_,class:["group cursor-pointer border-dashed border-2 flex justify-center items-center bg-white hover:bg-white/50 text-[#ddd] w-full relative",d.banner?"h-[25rem]":"pt-[56.25%]"]},t.$attrs),[a("span",R,[p(l)]),h(u)?(i(),c("div",S,[a("span",U,[p(l)]),d.banner?(i(),c("p",F," Täze surat goýmak üçin basyň ")):y("",!0)])):y("",!0),a("input",{onInput:s,ref_key:"fileInput",ref:f,accept:"video/*",type:"file",class:"hidden"},null,544)],16)])}}},M=a("div",{class:"my-4 font-bold bg-slate-300 p-2"},"Banner gosun",-1),N={class:"flex justify-between mt-3 items-end"},j={class:"w-[400px]"},A=a("button",null,"Add Category",-1),J={__name:"add",setup(d){const m=z(),n=$(),f=o(null);o(null),o(null),o(null);const e=o(null),u=C();o(null),v(),b(f,()=>{});const _=async()=>{try{if(!e.value)throw u.error("Maglumatlary doly giriziň!"),"Maglumatlary doly giriziň!";const s=new FormData;s.append("video",e.value),m.startLoading();const{data:t,pending:r}=await n.addVideos(s);r.value||m.endLoading(),v().push("/admin/videos")}catch(s){console.log(s)}};return(s,t)=>{const r=L,l=B;return i(),c("div",null,[M,a("div",N,[a("div",j,[p(r,{modelValue:h(e),"onUpdate:modelValue":t[0]||(t[0]=g=>I(e)?e.value=g:null)},null,8,["modelValue"])]),p(l,{onClick:_,class:"",type:"secondary"},{default:V(()=>[A]),_:1})])])}}};export{J as default};
