import{_ as N}from"./like.ce290c70.js";import{_ as q}from"./TrashButtonAndCounter.ba55ed52.js";import{_ as R}from"./_plugin-vue_export-helper.c27b6911.js";import{Z as m,I as p,R as t,a as g,aa as F,u as i,Q as G,H as S,K,G as L,Y as A,U as _,e as O,ad as Q,al as Y,a7 as J,a8 as W}from"./swiper-vue.406cf000.js";import{_ as X,a as ee}from"./base-product.0bff633a.js";import{c as te,g as se,a as oe,b as ae,m as le,u as ue}from"./entry.bfa7a906.js";import{b as ne,S as ie}from"./trash.6deb6e11.js";import{u as y}from"./useMyFetch.a4389793.js";import{u as re}from"./authStore.4421eb47.js";import{u as de}from"./favourite.47e3ed35.js";import"./trash.5beb687a.js";import"./nuxt-link.5dccc6ae.js";import"./fetch.f5b25f3c.js";const ce={},me=t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",fill:"currentColor"},[t("path",{d:"M120-160v-640l760 320-760 320Zm60-93 544-227-544-230v168l242 62-242 60v167Zm0 0v-457 457Z"})],-1),pe=[me];function _e(x,d){return m(),p("div",null,pe)}const ve=R(ce,[["render",_e]]);const fe=x=>(J("data-v-2acb38c4"),x=x(),W(),x),he={class:"group aspect-[video] w-screen 2xl:w-[1428px] mx-auto flex justify-between items-start px-4 sm:flex-row flex-col"},ge={class:"sm:w-[35%] w-full relative"},xe=["src"],we={key:0,class:"absolute -top-[10px] -left-[11px]"},be=fe(()=>t("img",{class:"md:w-25 w-18",src:ee,alt:""},null,-1)),ye=[be],ke={class:"absolute top-5 right-5"},$e={class:"w-full relative mt-5 flex justify-start"},Se=["src","onClick"],Te={class:"w-[60%] sm:ml-6 ml-0 mt-6"},De={class:"one_prod w-fit cursor-pointer transition-all duration-100 hover:text-[#44A4DB] md:text-5xl text-2xl mb-1 font-semibold font-inter"},Ce={class:"sm:pt-1.5 pt-0 pb-1.5 md:text-xl text-lg sm:font-normal font-medium"},Be={class:"flex items-center flex-wrap sm:px-4 px-1 py-2 border-t border-b border-gray-200"},Ie={class:"text-white cursor-pointer rounded-md text-2xl px-4 py-3 bg-[#44A4DB]"},Le={class:"md:ml-5 ml-1 pt-3 w-55"},Ae={class:"min-w-[300px] w-auto flex gap-4"},Pe={class:"w-screen 2xl:w-[1428px] mx-auto px-4 sm:flex-row flex-col"},Ve={class:"bg-teal-100 mt-6"},je={class:"font-alatsi font-bold p-2 uppercase"},Me={class:"odd:bg-teal-50 even:bg-teal-100 p-2 font-inter"},ze={class:"mt-8 px-0 md:px-10 cursor-pointer transition-all duration-100 md:text-4xl text-2xl mb-1 font-semibold font-inter"},Fe={style:{},class:"flex flex-wrap justify-start md:px-1 mt-2 gap-2 md:gap-3"},Oe={__name:"[id]",async setup(x){var j,M,z;let d,k;const T=de(),D=te(),f=re(),{locale:U}=se(),a=g(null),C=g([]),$=g(null),h=g(null),B=g(0),c=g(null);oe();const P=ae(),V=`/api/v1/client/products/product/${P.params.id}?lang=${U.value}`,l=ne(V,null,{serializer:ie.object}),Z=async()=>{var o,n,u,r;if(!((o=h.value)!=null&&o.length))return D.error("kommentariya bosh bolmaly dal");if(!((n=f.userToken)!=null&&n.uuid))return D.error("Ulgama girin");const{data:e}=await y("/api/v1/client/comment/create",{method:"POST",body:{product_id:a.value.uuid,user_id:(u=f.userToken)==null?void 0:u.uuid,content:h.value}});(r=e.value)!=null&&r.status&&(h.value=null,D.success("Habarynyz garasylyar"))},{data:E}=([d,k]=F(()=>y(`/api/v1/client/products/product-comment?product_id=${P.params.id}&offset=0&limit=100`)),d=await d,k(),d);if(console.log(l.value,"lesson.value"),l.value)a.value=l.value.data.one_products,c.value=l.value.data.one_products,$.value=l.value.data.one_products.images[0],l.value.data.products.filter((e,o)=>{var n,u,r,v;l.value.data.one_products.uuid!==e.uuid?C.value.push(e):c.value={name:(n=l.value.data.one_products)==null?void 0:n.name,uuid:(u=l.value.data.one_products)==null?void 0:u.uuid,images:(r=l.value.data.one_products)==null?void 0:r.images[0].img_path,price:(v=l.value.data.one_products)==null?void 0:v.price}}),console.log("getting from cache");else{console.log(l.value,"lesson.value");const{data:e,error:o,status:n}=([d,k]=F(()=>y(V)),d=await d,k(),d);if(o.value)throw le({...o.value,statusMessage:"Could not fetch lesson"});l.value=e.value,n.value&&(a.value=e.value.data.one_products,c.value=e.value.data.one_products,$.value=e.value.data.one_products.images[0],e.value.data.products.filter((u,r)=>{var v,w,b,s;e.value.data.one_products.uuid!==u.uuid?C.value.push(u):c.value={name:(v=e.value.data.one_products)==null?void 0:v.name,uuid:(w=e.value.data.one_products)==null?void 0:w.uuid,images:(b=e.value.data.one_products)==null?void 0:b.images[0].img_path,price:(s=e.value.data.one_products)==null?void 0:s.price}}))}(j=T.wish_items)==null||j.forEach(async e=>{e.uuid==a.value.uuid?a.value.isLiked=!0:a.value.isLiked==!1});const H=async e=>{var o,n,u,r;e.isLiked?(e.isLiked=!1,c.value={name:e==null?void 0:e.name,uuid:e==null?void 0:e.uuid,images:e==null?void 0:e.images[0].img_path,price:e==null?void 0:e.price},T.removeLocalStorage(c.value),(o=f.userToken)!=null&&o.uuid&&await y(`/api/v1/client/wish-list/delete/${(n=f.userToken)==null?void 0:n.uuid}/${e.uuid}`,{method:"POST"})):(e.isLiked=!0,c.value={name:e==null?void 0:e.name,uuid:e==null?void 0:e.uuid,images:e==null?void 0:e.images[0].img_path,price:e==null?void 0:e.price},(u=f.userToken)!=null&&u.uuid&&y("/api/v1/client/wish-list/create",{method:"POST",body:{product_id:e.uuid,user_id:(r=f.userToken)==null?void 0:r.uuid}}),T.setLocalStorage(c.value))};return ue({title:(M=a.value)==null?void 0:M.name,meta:[{name:"description",content:(z=a.value)==null?void 0:z.description}]}),(e,o)=>{var w,b;const n=N,u=q,r=ve,v=X;return m(),p("div",null,[t("div",he,[t("div",ge,[t("img",{src:`http://duypbaha.com.tm/api/v1/uploads/images/${(w=i($))==null?void 0:w.img_path}`,class:"w-full one_img rounded-md aspect-square",alt:""},null,8,xe),(b=e.propItem)!=null&&b.status?(m(),p("div",we,ye)):G("",!0),t("div",ke,[S(n,{fill:"none",onClick:o[0]||(o[0]=s=>H(i(a))),class:K([i(a).isLiked?"fill-red-600 text-red-600":" text-gray-400","group-hover:text-red-600 w-7"])},null,8,["class"])]),t("div",$e,[(m(!0),p(L,null,A(i(a).images,s=>(m(),p("img",{key:s.img_path,src:`http://duypbaha.com.tm/api/v1/uploads/images/${s==null?void 0:s.img_path}`,onClick:I=>$.value=s,class:"w-[19%] rounded-md aspect-square mr-2 border border-blue-200",alt:""},null,8,Se))),128))])]),t("div",Te,[t("div",null,[t("div",De,_(i(a).name),1),t("div",Ce,_(i(a).description),1),t("div",Be,[t("div",Ie,_(i(a).price)+" TMT ",1)]),t("div",Le,[S(u,{item:i(c),modelValue:i(B),"onUpdate:modelValue":o[1]||(o[1]=s=>O(B)?B.value=s:null)},null,8,["item","modelValue"])]),t("div",null,[t("p",null,_(e.$t("comment")),1),t("div",Ae,[Q(t("textarea",{class:"border border-[#44A4DB] p-2",type:"text","onUpdate:modelValue":o[2]||(o[2]=s=>O(h)?h.value=s:null)},null,512),[[Y,i(h)]]),S(r,{onClick:Z,class:"md:cursor-pointer self-end cursor-auto text-[#44A4DB] fill-[#44A4DB]"})])])])])]),t("div",Pe,[t("div",Ve,[t("p",je,_(e.$t("comments")),1),t("ul",null,[(m(!0),p(L,null,A(i(E).data.comments,(s,I)=>(m(),p("li",Me,_(I+1)+": "+_(s.content),1))),256))])]),t("div",ze,_(e.$t("similar_products")),1),t("div",Fe,[(m(!0),p(L,null,A(i(C),(s,I)=>(m(),p("div",{key:s==null?void 0:s.uuid,class:"group relative md:w-[265px] w-[176px] product_item mb-3 hover:shadow-none md:hover:shadow-hero bg-[#D9D9D940] hover:bg-[#D9D9D940] transition-all ease-in-out duration-200 rounded-xl flex flex-col justify-between items-center"},[S(v,{item:s},null,8,["item"])]))),128))])])])}}},Xe=R(Oe,[["__scopeId","data-v-2acb38c4"]]);export{Xe as default};
