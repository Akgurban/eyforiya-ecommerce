import{_ as z}from"./nuxt-link.5dccc6ae.js";import{_ as D}from"./chevron-right.c437f043.js";import{_ as F}from"./TrashButtonAndCounter.ba55ed52.js";import{_ as H}from"./base-button.0f6fb678.js";import{a as y,b as E,aa as G,Z as h,I as m,R as t,H as v,M as L,S as P,U as a,u as p,Q as U,G as Q,Y,ad as Z,al as J,e as K}from"./swiper-vue.406cf000.js";import{g as W,c as X,a as A}from"./entry.bfa7a906.js";import{u as w}from"./useMyFetch.a4389793.js";import{a as tt}from"./trash.6deb6e11.js";import{u as et}from"./authStore.4421eb47.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./trash.5beb687a.js";import"./fetch.f5b25f3c.js";const st=""+new URL("deletecon.8c55a18e.svg",import.meta.url).href,ot={class:"2xl:w-[1424px] xl:w-[900px] w-screen mx-auto"},at={class:"2xl:w-[1424px] xl:w-[900px] w-screen flex gap-3 items-center pl-10"},lt={class:"cursor-pointer font-bold"},nt={class:"w-full"},rt={class:"w-full"},ct={class:"bg-[#3C4242] text-white p-2 md:p-[26px] flex justify-between mt-10 px-3 md:px-10 w-full"},ut=t("div",null,null,-1),it={class:"flex justify-between w-full md:text-xl text-[10px]"},dt={class:"uppercase"},pt={class:"uppercase"},_t={class:"uppercase"},ht={class:"uppercase"},mt={key:0,class:"mt-20 text-center w-full text-6xl text-gray-500 font-alatsi font-bold"},ft={class:"flex md:flex-row flex-col items-center md:gap-10 gap-5"},xt=["onClick","src"],vt={class:"font-alatsi md:text-2xl text-lg w-[100px]"},wt={class:"flex items-start w-full justify-end gap-1 md:gap-10 md:flex-row flex-row"},gt={class:"w-[150px] md:w-[400px] flex md:flex-row flex-col items-center justify-start ml-0"},yt={class:"uppercase md:w-[200px] w-[150px]"},bt={class:"uppercase font-bold text-lg md:w-[150px] flex flex-nowrap w-[150px]"},kt=["onClick"],$t=t("img",{class:"m-1 w-4",src:st,alt:""},null,-1),Tt=[$t],Ct={key:1,class:"bg-[#3C4242] text-white py-3 flex md:flex-row flex-col gap-y-4 justify-between w-full md:text-xl px-5 text-[10px]"},jt={class:""},Rt={class:"uppercase font-bold font-alatsi"},St={class:"uppercase font-bold font-inter text-lg"},Bt={class:"uppercase font-bold font-alatsi"},Mt={class:"flex h-12 items-center justify-center text-black relative bg-white rounded-lg"},Nt=t("div",{class:"h-full flex text-lg items-center mx-2"},"+993",-1),Gt={__name:"index",async setup(Vt){var C,j,R,S,B,M;let f,b;y(0);const{locale:k}=W(),$=X(),l=tt(),r=et(),g=y(0),d=y(null),T=()=>{var e;g.value=0,(e=l.trash_items.products)==null||e.filter(o=>{g.value+=o.price*o.count})};T(),E(l.trash_items,T);const I=async e=>{var o,c,u,i,n,_,s;if(l.removeLocalStorage(e,0),r.userToken){const{data:N,status:q}=await w("/api/v1/client/trash/create",{body:{user_id:(o=r.userToken)==null?void 0:o.uuid,product_id:e==null?void 0:e.uuid,count:0},method:"POST"});if(q&&(c=r.userToken)!=null&&c.uuid){const{data:x}=await w(`/api/v1/client/trash?user_id=${r.userToken.uuid}&lang=${k.value}`);x.value.status&&((i=(u=x.value)==null?void 0:u.data)!=null&&i.length)&&(l.trash_items.products=[],(_=(n=x.value)==null?void 0:n.data)==null||_.filter(V=>{V.images=V.img_path}),l.trash_items.products=(s=x.value)==null?void 0:s.data)}}};if((C=r.userToken)!=null&&C.uuid){const{data:e}=([f,b]=G(()=>w(`/api/v1/client/trash?user_id=${r.userToken.uuid}&lang=${k.value}`)),f=await f,b(),f);e.value.status&&((R=(j=e.value)==null?void 0:j.data)!=null&&R.length)&&(l.trash_items.products=[],(B=(S=e.value)==null?void 0:S.data)==null||B.filter(o=>{o.images=o.img_path}),l.trash_items.products=(M=e.value)==null?void 0:M.data)}const O=async()=>{var o,c,u,i;const e=[];if((o=l.trash_items.products)==null||o.filter(n=>{e.push({product_id:n.uuid,count:`${n.count}`})}),((c=d.value)==null?void 0:c.length)==8){const{data:n}=await w("/api/v1/client/products/order/create",{method:"POST",body:{user_id:((u=r.userToken)==null?void 0:u.uuid)||null,phone:`${d.value}`,products:e}});(i=n.value)!=null&&i.status&&(l.trash_items.products=[],$.success("Habarynyz ustunlikli kabul edildi"),d.value="",A().push("/"))}else $.error("Telefonynyzy dogry dolduryn")};return(e,o)=>{var _;const c=z,u=D,i=F,n=H;return h(),m("div",ot,[t("div",at,[v(c,{to:"/",class:"cursor-pointer hover:font-bold"},{default:L(()=>[P(a(e.$t("main")),1)]),_:1}),v(u,{class:"h-3"}),t("p",lt,a(e.$t("add_to")),1)]),t("div",nt,[t("div",rt,[t("div",ct,[ut,t("div",it,[t("p",dt,a(e.$t("info_product")),1),t("p",pt,a(e.$t("quantity")),1),t("p",_t,a(e.$t("price")),1),t("p",ht,a(e.$t("delete")),1)])]),(_=p(l).trash_items.products)!=null&&_.length?U("",!0):(h(),m("div",mt,a(e.$t("trash_empty")),1)),(h(!0),m(Q,null,Y(p(l).trash_items.products,s=>(h(),m("div",{key:s,class:"py-12 p-[26px] flex items-center justify-between px-10"},[t("div",null,[t("div",ft,[t("img",{onClick:N=>("useRouter"in e?e.useRouter:p(A))().push(`/product/${s==null?void 0:s.uuid}`),src:`http://duypbaha.com.tm/api/v1/uploads/images/${s.images}`,alt:"",class:"w-35 rounded-md aspect-square object-cover"},null,8,xt),t("p",vt,a(s.name),1)])]),t("div",wt,[t("div",gt,[t("p",yt,[v(i,{count:s.count,item:s},null,8,["count","item"])]),t("p",bt,a((s==null?void 0:s.count)*(s==null?void 0:s.price))+" TMT ",1)]),t("div",{onClick:N=>I(s),class:"block cursor-pointer"},Tt,8,kt)])]))),128)),p(l).trash_items.products.length?(h(),m("div",Ct,[t("div",jt,[t("p",Rt,a(e.$t("totalprice"))+": ",1),t("p",St,a(p(g))+" TMT ",1)]),t("div",null,[t("p",Bt,a(e.$t("phone"))+":",1),t("div",Mt,[Nt,Z(t("input",{class:"text-black text-lg bg-white outline-0 border-white",type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>K(d)?d.value=s:null),placeholder:"6522222"},null,512),[[J,p(d)]])])]),v(n,{onClick:O,class:"rounded-lg text-lg",type:"secondary"},{default:L(()=>[P(a(e.$t("prepare")),1)]),_:1})])):U("",!0)])])])}}};export{Gt as default};
