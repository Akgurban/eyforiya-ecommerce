import{_ as H}from"./like.3fdeebb8.js";import{_ as q}from"./TrashButtonAndCounter.082e104d.js";import{_ as O}from"./_plugin-vue_export-helper.c27b6911.js";import{Z as m,I as p,R as t,a as g,aa as F,u as i,Q as G,H as $,K,G as I,Y as L,U as _,e as N,ab as Q,ac as Y,S as J,a7 as W,a8 as X}from"./swiper-vue.91aa2a35.js";import{_ as ee,a as te}from"./base-product.2056669b.js";import{c as se,g as oe,a as ae,b as le,m as ne,u as ue}from"./entry.c80f5040.js";import{b as ie,S as re}from"./trash.376bfbcf.js";import{u as y}from"./useMyFetch.120a421e.js";import{u as de}from"./authStore.683feaee.js";import{u as ce}from"./favourite.c4ead402.js";import"./trash.3aa2d685.js";import"./nuxt-link.dea4be12.js";import"./fetch.7ac89bf4.js";const me={},pe=t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",fill:"currentColor"},[t("path",{d:"M120-160v-640l760 320-760 320Zm60-93 544-227-544-230v168l242 62-242 60v167Zm0 0v-457 457Z"})],-1),_e=[pe];function ve(x,d){return m(),p("div",null,_e)}const fe=O(me,[["render",ve]]);const he=x=>(W("data-v-0e6dda37"),x=x(),X(),x),ge={class:"group aspect-[video] w-screen 2xl:w-[1428px] mx-auto flex justify-between items-start px-4 sm:flex-row flex-col"},xe={class:"sm:w-[35%] w-full relative"},we=["src"],be={key:0,class:"absolute -top-[10px] -left-[11px]"},ye=he(()=>t("img",{class:"md:w-25 w-18",src:te,alt:""},null,-1)),ke=[ye],Se={class:"absolute top-5 right-5"},$e={class:"w-full relative mt-5 flex justify-start"},Te=["src","onClick"],De={class:"w-[60%] sm:ml-6 ml-0 mt-6"},Ce={class:"one_prod w-fit cursor-pointer transition-all duration-100 hover:text-[#44A4DB] md:text-5xl text-2xl mb-1 font-semibold font-inter"},Be={class:"sm:pt-1.5 pt-0 pb-1.5 md:text-xl text-lg sm:font-normal font-medium"},Ie={class:"flex items-center flex-wrap sm:px-4 px-1 py-2 border-t border-b border-gray-200"},Le={class:"text-white cursor-pointer rounded-md text-2xl px-4 py-3 bg-[#44A4DB]"},Ae={class:"md:ml-5 ml-1 pt-3 w-55"},Pe={class:"min-w-[300px] w-auto flex gap-4"},Ve={class:"w-screen 2xl:w-[1428px] mx-auto px-4 sm:flex-row flex-col"},je={class:"bg-teal-100 mt-6"},Me={class:"font-alatsi font-bold p-2 uppercase"},ze={class:"odd:bg-teal-50 even:bg-teal-100 p-2 font-inter"},Fe={class:"inline font-semibold"},Ne={class:"mt-8 px-0 md:px-10 cursor-pointer transition-all duration-100 md:text-4xl text-2xl mb-1 font-semibold font-inter"},Oe={style:{},class:"flex flex-wrap justify-start md:px-1 mt-2 gap-2 md:gap-3"},Re={__name:"[id]",async setup(x){var V,j,M;let d,k;const T=ce(),D=se(),f=de(),{locale:R}=oe(),a=g(null),C=g([]),S=g(null),h=g(null),B=g(0),c=g(null);ae();const A=le(),P=`/api/v1/client/products/product/${A.params.id}?lang=${R.value}`,l=ie(P,null,{serializer:re.object}),U=async()=>{var o,u,n,r;if(!((o=h.value)!=null&&o.length))return D.error("kommentariya bosh bolmaly dal");if(!((u=f.userToken)!=null&&u.uuid))return D.error("Ulgama girin");const{data:e}=await y("/api/v1/client/comment/create",{method:"POST",body:{product_id:a.value.uuid,user_id:(n=f.userToken)==null?void 0:n.uuid,content:h.value}});(r=e.value)!=null&&r.status&&(h.value=null,D.success("Habarynyz garasylyar"))},{data:Z}=([d,k]=F(()=>y(`/api/v1/client/products/product-comment?product_id=${A.params.id}&offset=0&limit=100`)),d=await d,k(),d);if(console.log(l.value,"lesson.value"),l.value)a.value=l.value.data.one_products,c.value=l.value.data.one_products,S.value=l.value.data.one_products.images[0],l.value.data.products.filter((e,o)=>{var u,n,r,v;l.value.data.one_products.uuid!==e.uuid?C.value.push(e):c.value={name:(u=l.value.data.one_products)==null?void 0:u.name,uuid:(n=l.value.data.one_products)==null?void 0:n.uuid,images:(r=l.value.data.one_products)==null?void 0:r.images[0].img_path,price:(v=l.value.data.one_products)==null?void 0:v.price}}),console.log("getting from cache");else{console.log(l.value,"lesson.value");const{data:e,error:o,status:u}=([d,k]=F(()=>y(P)),d=await d,k(),d);if(o.value)throw ne({...o.value,statusMessage:"Could not fetch lesson"});l.value=e.value,u.value&&(a.value=e.value.data.one_products,c.value=e.value.data.one_products,S.value=e.value.data.one_products.images[0],e.value.data.products.filter((n,r)=>{var v,w,b,s;e.value.data.one_products.uuid!==n.uuid?C.value.push(n):c.value={name:(v=e.value.data.one_products)==null?void 0:v.name,uuid:(w=e.value.data.one_products)==null?void 0:w.uuid,images:(b=e.value.data.one_products)==null?void 0:b.images[0].img_path,price:(s=e.value.data.one_products)==null?void 0:s.price}}))}(V=T.wish_items)==null||V.forEach(async e=>{e.uuid==a.value.uuid?a.value.isLiked=!0:a.value.isLiked==!1});const E=async e=>{var o,u,n,r;e.isLiked?(e.isLiked=!1,c.value={name:e==null?void 0:e.name,uuid:e==null?void 0:e.uuid,images:e==null?void 0:e.images[0].img_path,price:e==null?void 0:e.price},T.removeLocalStorage(c.value),(o=f.userToken)!=null&&o.uuid&&await y(`/api/v1/client/wish-list/delete/${(u=f.userToken)==null?void 0:u.uuid}/${e.uuid}`,{method:"POST"})):(e.isLiked=!0,c.value={name:e==null?void 0:e.name,uuid:e==null?void 0:e.uuid,images:e==null?void 0:e.images[0].img_path,price:e==null?void 0:e.price},(n=f.userToken)!=null&&n.uuid&&y("/api/v1/client/wish-list/create",{method:"POST",body:{product_id:e.uuid,user_id:(r=f.userToken)==null?void 0:r.uuid}}),T.setLocalStorage(c.value))};return ue({title:(j=a.value)==null?void 0:j.name,meta:[{name:"description",content:(M=a.value)==null?void 0:M.description}]}),(e,o)=>{var w,b;const u=H,n=q,r=fe,v=ee;return m(),p("div",null,[t("div",ge,[t("div",xe,[t("img",{src:`http://duypbaha.com.tm/api/v1/uploads/images/${(w=i(S))==null?void 0:w.img_path}`,class:"w-full one_img rounded-md aspect-square",alt:""},null,8,we),(b=e.propItem)!=null&&b.status?(m(),p("div",be,ke)):G("",!0),t("div",Se,[$(u,{fill:"none",onClick:o[0]||(o[0]=s=>E(i(a))),class:K([i(a).isLiked?"fill-red-600 text-red-600":" text-gray-400","group-hover:text-red-600 w-7"])},null,8,["class"])]),t("div",$e,[(m(!0),p(I,null,L(i(a).images,s=>(m(),p("img",{key:s.img_path,src:`http://duypbaha.com.tm/api/v1/uploads/images/${s==null?void 0:s.img_path}`,onClick:z=>S.value=s,class:"w-[19%] rounded-md aspect-square mr-2 border border-blue-200",alt:""},null,8,Te))),128))])]),t("div",De,[t("div",null,[t("div",Ce,_(i(a).name),1),t("div",Be,_(i(a).description),1),t("div",Ie,[t("div",Le,_(i(a).price)+" TMT ",1)]),t("div",Ae,[$(n,{item:i(c),modelValue:i(B),"onUpdate:modelValue":o[1]||(o[1]=s=>N(B)?B.value=s:null)},null,8,["item","modelValue"])]),t("div",null,[t("p",null,_(e.$t("comment")),1),t("div",Pe,[Q(t("textarea",{class:"border border-[#44A4DB] p-2",type:"text","onUpdate:modelValue":o[2]||(o[2]=s=>N(h)?h.value=s:null)},null,512),[[Y,i(h)]]),$(r,{onClick:U,class:"md:cursor-pointer self-end cursor-auto text-[#44A4DB] fill-[#44A4DB]"})])])])])]),t("div",Ve,[t("div",je,[t("p",Me,_(e.$t("comments")),1),t("ul",null,[(m(!0),p(I,null,L(i(Z).data.comments,(s,z)=>(m(),p("li",ze,[t("div",null,[t("p",Fe,_(s.user_name),1),J(" : "+_(s.content),1)])]))),256))])]),t("div",Ne,_(e.$t("similar_products")),1),t("div",Oe,[(m(!0),p(I,null,L(i(C),(s,z)=>(m(),p("div",{key:s==null?void 0:s.uuid,class:"group relative md:w-[265px] w-[176px] product_item mb-3 hover:shadow-none md:hover:shadow-hero bg-[#D9D9D940] hover:bg-[#D9D9D940] transition-all ease-in-out duration-200 rounded-xl flex flex-col justify-between items-center"},[$(v,{item:s},null,8,["item"])]))),128))])])])}}},tt=O(Re,[["__scopeId","data-v-0e6dda37"]]);export{tt as default};
