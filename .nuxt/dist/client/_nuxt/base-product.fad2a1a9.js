import{_ as y}from"./nuxt-link.bb2e9639.js";import{_ as S}from"./like.ce290c70.js";import{_ as $}from"./TrashButtonAndCounter.21828bf0.js";import{u as g}from"./useMyFetch.5f947471.js";import{u as B}from"./favourite.a0934c96.js";import{u as C}from"./authStore.b7218c75.js";import{a as w,b as V,Z as F,I as P,H as v,M as A,R as f,u as i,U as T,K as E,e as I,G as M}from"./swiper-vue.406cf000.js";const N=["src"],O={class:"w-fit mx-auto font-medium md:text-3xl text-base font-alatsi text-[#3C4242] mt-3 mb-1"},z={class:"mx-auto font-semibold text-[#48BC4E] text-3xl font-alatsi w-fit pb-1 border-b border-[#44A4DB]"},D={class:"absolute top-5 right-5"},Z={__name:"base-product",props:{item:{type:Object,default:{}}},setup(_){var k;const x=_,r=B(),t=w({}),a=C();t.value=x.item,(k=r.wish_items)==null||k.forEach(async e=>{e.uuid==x.item.uuid?t.value.isLiked=!0:t.isLiked==!1});const L=async e=>{var o,m,c,p,u,s,l,n;if((o=a.userToken)!=null&&o.uuid){const{data:h}=await g(`/api/v1/client/wish-list?lang=tm&user_id=${(m=a.userToken)==null?void 0:m.uuid}`);(c=h.value)!=null&&c.status&&((p=h.value.data)==null||p.filter(b=>{b.images=b.img_path}),r.wish_items=h.value.data)}e.isLiked?(e.isLiked=!1,r.removeLocalStorage(e),(u=a.userToken)!=null&&u.uuid&&await g(`/api/v1/client/wish-list/delete/${(s=a.userToken)==null?void 0:s.uuid}/${e.uuid}`,{method:"POST"})):(e.isLiked=!0,(l=a.userToken)!=null&&l.uuid&&g("/api/v1/client/wish-list/create",{method:"POST",body:{product_id:e.uuid,user_id:(n=a.userToken)==null?void 0:n.uuid}}),r.setLocalStorage(e))},d=w(null);return V(d,()=>{}),(e,o)=>{var u;const m=y,c=S,p=$;return F(),P(M,null,[v(m,{to:e.localePath(`/product/${(u=_.item)==null?void 0:u.uuid}`),class:"group rounded-xl w-full text-center"},{default:A(()=>{var s,l,n;return[f("img",{class:"border w-full aspect-square select-none rounded-md md:rounded-lg border-[#e6e6e6]",src:`http://duypbaha.com.tm/api/v1/uploads/images/${(s=i(t))==null?void 0:s.images}`,alt:"",height:"262",loading:"lazy"},null,8,N),f("div",O,T((l=i(t))==null?void 0:l.name),1),f("div",z,T((n=i(t))==null?void 0:n.price)+" TMT ",1)]}),_:1},8,["to"]),f("div",D,[v(c,{fill:"none",onClick:o[0]||(o[0]=s=>L(i(t))),class:E([_.item.isLiked?"fill-red-600 text-red-600":" text-gray-400","group-hover:text-red-600 w-7"])},null,8,["class"])]),v(p,{class:"pt-5",item:i(t),modelValue:i(d),"onUpdate:modelValue":o[1]||(o[1]=s=>I(d)?d.value=s:null)},null,8,["item","modelValue"])],64)}}};export{Z as _};
