import{_ as H}from"./nuxt-link.600e9ea6.js";import{_ as I}from"./chevron-right.c437f043.js";import{_ as O}from"./TrashButtonAndCounter.f34e158d.js";import{_ as F}from"./base-button.0f6fb678.js";import{a as g,b as Q,aa as q,Z as f,I as h,R as t,H as x,M,S as z,u as p,Q as E,G,Y,U as y,ad as Z,al as J,e as K,a9 as W}from"./swiper-vue.406cf000.js";import{g as X,c as tt,a as A}from"./entry.0e1dff64.js";import{u as v}from"./useMyFetch.b5f0c96b.js";import{a as et}from"./trash.7f2b6c62.js";import{u as st}from"./authStore.469b83a5.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./trash.5beb687a.js";import"./fetch.9d574d35.js";const ot=""+new URL("deletecon.8c55a18e.svg",import.meta.url).href,at={class:"2xl:w-[1424px] xl:w-[900px] w-screen mx-auto"},lt={class:"2xl:w-[1424px] xl:w-[900px] w-screen flex gap-3 items-center pl-10"},ct=t("p",{class:"cursor-pointer font-bold"},"Add to cart",-1),rt={class:"w-full"},nt={class:"w-full"},ut=W('<div class="bg-[#3C4242] text-white p-2 md:p-[26px] flex justify-between mt-10 px-3 md:px-10 w-full"><div></div><div class="flex justify-between w-full md:text-xl text-[10px]"><p class="uppercase">Product Details</p><p class="uppercase">Quantity</p><p class="uppercase">Price</p><p class="uppercase">Pozmak</p></div></div>',1),it={key:0,class:"mt-20 text-center w-full text-6xl text-gray-500 font-alatsi font-bold"},dt={class:"flex md:flex-row flex-col items-center md:gap-10 gap-5"},pt=["onClick","src"],_t={class:"font-alatsi md:text-2xl text-lg w-[100px]"},mt={class:"flex items-start w-full justify-end gap-1 md:gap-10 md:flex-row flex-row"},ft={class:"w-[150px] md:w-[400px] flex md:flex-row flex-col items-center justify-start ml-0"},ht={class:"uppercase md:w-[200px] w-[150px]"},xt={class:"uppercase font-bold text-lg md:w-[150px] flex flex-nowrap w-[150px]"},vt=["onClick"],wt=t("img",{class:"m-1 w-4",src:ot,alt:""},null,-1),gt=[wt],yt={class:"bg-[#3C4242] text-white py-3 flex md:flex-row flex-col gap-y-4 justify-between w-full md:text-xl px-5 text-[10px]"},bt={class:""},kt=t("p",{class:"uppercase font-bold font-alatsi"},"Total Price:",-1),Tt={class:"uppercase font-bold font-inter text-lg"},$t=t("p",{class:"uppercase font-bold font-alatsi"},"Phone number:",-1),Ct={class:"flex h-12 items-center justify-center text-black relative bg-white rounded-lg"},St=t("div",{class:"h-full flex text-lg items-center mx-2"},"+993",-1),It={__name:"index",async setup(Pt){var C,S,P,j,B,N;let _,b;g(0);const{locale:k}=X(),T=tt(),a=et(),c=st(),w=g(0),i=g(null),$=()=>{var s;w.value=0,(s=a.trash_items.products)==null||s.filter(o=>{w.value+=o.price*o.count})};$(),Q(a.trash_items,$);const L=async s=>{var o,r,n,u,l,d,e;if(a.removeLocalStorage(s,0),c.userToken){const{data:R,status:D}=await v("/api/v1/client/trash/create",{body:{user_id:(o=c.userToken)==null?void 0:o.uuid,product_id:s==null?void 0:s.uuid,count:0},method:"POST"});if(D&&(r=c.userToken)!=null&&r.uuid){const{data:m}=await v(`/api/v1/client/trash?user_id=${c.userToken.uuid}&lang=${k.value}`);m.value.status&&((u=(n=m.value)==null?void 0:n.data)!=null&&u.length)&&(a.trash_items.products=[],(d=(l=m.value)==null?void 0:l.data)==null||d.filter(V=>{V.images=V.img_path}),a.trash_items.products=(e=m.value)==null?void 0:e.data)}}};if((C=c.userToken)!=null&&C.uuid){const{data:s}=([_,b]=q(()=>v(`/api/v1/client/trash?user_id=${c.userToken.uuid}&lang=${k.value}`)),_=await _,b(),_);s.value.status&&((P=(S=s.value)==null?void 0:S.data)!=null&&P.length)&&(a.trash_items.products=[],(B=(j=s.value)==null?void 0:j.data)==null||B.filter(o=>{o.images=o.img_path}),a.trash_items.products=(N=s.value)==null?void 0:N.data)}const U=async()=>{var o,r,n,u;const s=[];if((o=a.trash_items.products)==null||o.filter(l=>{s.push({product_id:l.uuid,count:`${l.count}`})}),((r=i.value)==null?void 0:r.length)==8){const{data:l}=await v("/api/v1/client/products/order/create",{method:"POST",body:{user_id:((n=c.userToken)==null?void 0:n.uuid)||null,phone:`${i.value}`,products:s}});(u=l.value)!=null&&u.status&&(a.trash_items.products=[],T.success("Habarynyz ustunlikli kabul edildi"),i.value="",A().push("/"))}else T.error("Telefonynyzy dogry dolduryn")};return(s,o)=>{var d;const r=H,n=I,u=O,l=F;return f(),h("div",at,[t("div",lt,[x(r,{to:"/",class:"cursor-pointer hover:font-bold"},{default:M(()=>[z("Home")]),_:1}),x(n,{class:"h-3"}),ct]),t("div",rt,[t("div",nt,[ut,(d=p(a).trash_items.products)!=null&&d.length?E("",!0):(f(),h("div",it," SebediNiz Bosh ")),(f(!0),h(G,null,Y(p(a).trash_items.products,e=>(f(),h("div",{key:e,class:"py-12 p-[26px] flex items-center justify-between px-10"},[t("div",null,[t("div",dt,[t("img",{onClick:R=>("useRouter"in s?s.useRouter:p(A))().push(`/product/${e==null?void 0:e.uuid}`),src:`http://duypbaha.com.tm/api/v1/uploads/images/${e.images}`,alt:"",class:"w-35 rounded-md aspect-square object-cover"},null,8,pt),t("p",_t,y(e.name),1)])]),t("div",mt,[t("div",ft,[t("p",ht,[x(u,{count:e.count,item:e},null,8,["count","item"])]),t("p",xt,y((e==null?void 0:e.count)*(e==null?void 0:e.price))+" TMT ",1)]),t("div",{onClick:R=>L(e),class:"block cursor-pointer"},gt,8,vt)])]))),128)),t("div",yt,[t("div",bt,[kt,t("p",Tt,y(p(w))+" TMT ",1)]),t("div",null,[$t,t("div",Ct,[St,Z(t("input",{class:"text-black text-lg bg-white outline-0 border-white",type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>K(i)?i.value=e:null),placeholder:"6522222"},null,512),[[J,p(i)]])])]),x(l,{onClick:U,class:"rounded-lg text-lg",type:"secondary"},{default:M(()=>[z("Sargydy tayyarlamak")]),_:1})])])])])}}};export{It as default};
