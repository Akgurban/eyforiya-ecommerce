import{_ as K}from"./like.ce290c70.js";import{_ as q}from"./TrashButtonAndCounter.7722f0bb.js";import{_ as O}from"./_plugin-vue_export-helper.c27b6911.js";import{Z as m,I as p,R as t,a as x,aa as z,u,H as $,K as N,G as L,Y as I,U as g,e as F,ad as G,al as Y,a7 as J,a8 as Q}from"./swiper-vue.406cf000.js";import{_ as W}from"./base-product.693226f6.js";import{c as X,g as ee,a as te,b as se,m as ae,u as oe}from"./entry.f57c7ce9.js";import{b as le,S as ie}from"./trash.69e30f7e.js";import{u as y}from"./useMyFetch.182df1fb.js";import{u as ne}from"./authStore.ba1671ca.js";import{u as ue}from"./favourite.2a1eb18a.js";import"./trash.5beb687a.js";import"./nuxt-link.3a82f007.js";import"./fetch.3824631a.js";const re={},de=t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",fill:"currentColor"},[t("path",{d:"M120-160v-640l760 320-760 320Zm60-93 544-227-544-230v168l242 62-242 60v167Zm0 0v-457 457Z"})],-1),ce=[de];function me(w,d){return m(),p("div",null,ce)}const pe=O(re,[["render",me]]);const R=w=>(J("data-v-6194d592"),w=w(),Q(),w),_e={class:"aspect-[video] w-screen 2xl:w-[1428px] mx-auto flex justify-between items-start px-4 sm:flex-row flex-col"},ve={class:"sm:w-[35%] w-full relative"},fe=["src"],he={class:"absolute top-5 right-5"},xe={class:"w-full relative mt-5 flex justify-start"},ge=["src","onClick"],we={class:"w-[60%] sm:ml-6 ml-0 mt-6"},be={class:"one_prod w-fit cursor-pointer transition-all duration-100 hover:text-[#44A4DB] md:text-5xl text-2xl mb-1 font-semibold font-inter"},ye={class:"sm:pt-1.5 pt-0 pb-1.5 md:text-xl text-lg sm:font-normal font-medium"},ke={class:"flex items-center flex-wrap sm:px-4 px-1 py-2 border-t border-b border-gray-200"},Se={class:"text-white cursor-pointer rounded-md text-2xl px-4 py-3 bg-[#44A4DB]"},$e={class:"w-fit md:ml-5 ml-1 pt-3"},Te=R(()=>t("p",null,"Kommentariya",-1)),De={class:"min-w-[300px] w-auto flex gap-4"},Be={class:"w-screen 2xl:w-[1428px] mx-auto px-4 sm:flex-row flex-col"},Ce={class:"bg-teal-100 mt-6"},Le=R(()=>t("p",{class:"font-alatsi font-bold p-2"},"Kommentariyalar",-1)),Ie={class:"odd:bg-teal-50 even:bg-teal-100 p-2 font-inter"},Ae={class:"mt-8 px-0 md:px-10 cursor-pointer transition-all duration-100 md:text-4xl text-2xl mb-1 font-semibold font-inter"},Pe={style:{},class:"flex flex-wrap justify-between md:px-1 mt-2"},Ve={__name:"[id]",async setup(w){var V,j,M;let d,k;const T=ue(),D=X(),v=ne(),{locale:U}=ee(),o=x(null),B=x([]),S=x(null),f=x(null),C=x(0),c=x(null);te();const A=se(),P=`/api/v1/client/products/product/${A.params.id}?lang=${U.value}`,l=le(P,null,{serializer:ie.object}),Z=async()=>{var a,n,i,r;if(!((a=f.value)!=null&&a.length))return D.error("kommentariya bosh bolmaly dal");if(!((n=v.userToken)!=null&&n.uuid))return D.error("Ulgama girin");const{data:e}=await y("/api/v1/client/comment/create",{method:"POST",body:{product_id:o.value.uuid,user_id:(i=v.userToken)==null?void 0:i.uuid,content:f.value}});(r=e.value)!=null&&r.status&&(f.value=null,D.success("Habarynyz garasylyar"))},{data:E}=([d,k]=z(()=>y(`/api/v1/client/products/product-comment?product_id=${A.params.id}&offset=0&limit=100`)),d=await d,k(),d);if(console.log(l.value,"lesson.value"),l.value)o.value=l.value.data.one_products,c.value=l.value.data.one_products,S.value=l.value.data.one_products.images[0],l.value.data.products.filter((e,a)=>{var n,i,r,_;l.value.data.one_products.uuid!==e.uuid?B.value.push(e):c.value={name:(n=l.value.data.one_products)==null?void 0:n.name,uuid:(i=l.value.data.one_products)==null?void 0:i.uuid,images:(r=l.value.data.one_products)==null?void 0:r.images[0].img_path,price:(_=l.value.data.one_products)==null?void 0:_.price}}),console.log("getting from cache");else{console.log(l.value,"lesson.value");const{data:e,error:a,status:n}=([d,k]=z(()=>y(P)),d=await d,k(),d);if(a.value)throw ae({...a.value,statusMessage:"Could not fetch lesson"});l.value=e.value,n.value&&(o.value=e.value.data.one_products,c.value=e.value.data.one_products,S.value=e.value.data.one_products.images[0],e.value.data.products.filter((i,r)=>{var _,b,s,h;e.value.data.one_products.uuid!==i.uuid?B.value.push(i):c.value={name:(_=e.value.data.one_products)==null?void 0:_.name,uuid:(b=e.value.data.one_products)==null?void 0:b.uuid,images:(s=e.value.data.one_products)==null?void 0:s.images[0].img_path,price:(h=e.value.data.one_products)==null?void 0:h.price}}))}(V=T.wish_items)==null||V.forEach(async e=>{e.uuid==o.value.uuid?o.value.isLiked=!0:o.value.isLiked==!1});const H=async e=>{var a,n,i,r;e.isLiked?(e.isLiked=!1,c.value={name:e==null?void 0:e.name,uuid:e==null?void 0:e.uuid,images:e==null?void 0:e.images[0].img_path,price:e==null?void 0:e.price},T.removeLocalStorage(c.value),(a=v.userToken)!=null&&a.uuid&&await y(`/api/v1/client/wish-list/delete/${(n=v.userToken)==null?void 0:n.uuid}/${e.uuid}`,{method:"POST"})):(e.isLiked=!0,c.value={name:e==null?void 0:e.name,uuid:e==null?void 0:e.uuid,images:e==null?void 0:e.images[0].img_path,price:e==null?void 0:e.price},(i=v.userToken)!=null&&i.uuid&&y("/api/v1/client/wish-list/create",{method:"POST",body:{product_id:e.uuid,user_id:(r=v.userToken)==null?void 0:r.uuid}}),T.setLocalStorage(c.value))};return oe({title:(j=o.value)==null?void 0:j.name,meta:[{name:"description",content:(M=o.value)==null?void 0:M.description}]}),(e,a)=>{var b;const n=K,i=q,r=pe,_=W;return m(),p("div",null,[t("div",_e,[t("div",ve,[t("img",{src:`http://duypbaha.com.tm/api/v1/uploads/images/${(b=u(S))==null?void 0:b.img_path}`,class:"w-full one_img rounded-md aspect-square",alt:""},null,8,fe),t("div",he,[$(n,{fill:"none",onClick:a[0]||(a[0]=s=>H(u(o))),class:N([u(o).isLiked?"fill-red-600 text-red-600":" text-white","hover:text-red-600 w-7"])},null,8,["class"])]),t("div",xe,[(m(!0),p(L,null,I(u(o).images,s=>(m(),p("img",{key:s.img_path,src:`http://duypbaha.com.tm/api/v1/uploads/images/${s==null?void 0:s.img_path}`,onClick:h=>S.value=s,class:"w-[19%] rounded-md aspect-square mr-2 border border-blue-200",alt:""},null,8,ge))),128))])]),t("div",we,[t("div",null,[t("div",be,g(u(o).name),1),t("div",ye,g(u(o).description),1),t("div",ke,[t("div",Se,g(u(o).price)+" TMT ",1)]),t("div",$e,[$(i,{item:u(c),modelValue:u(C),"onUpdate:modelValue":a[1]||(a[1]=s=>F(C)?C.value=s:null)},null,8,["item","modelValue"])]),t("div",null,[Te,t("div",De,[G(t("textarea",{class:"border border-[#44A4DB] p-2",type:"text","onUpdate:modelValue":a[2]||(a[2]=s=>F(f)?f.value=s:null)},null,512),[[Y,u(f)]]),$(r,{onClick:Z,class:"md:cursor-pointer self-end cursor-auto text-[#44A4DB] fill-[#44A4DB]"})])])])])]),t("div",Be,[t("div",Ce,[Le,t("ul",null,[(m(!0),p(L,null,I(u(E).data.comments,(s,h)=>(m(),p("li",Ie,g(h+1)+": "+g(s.content),1))),256))])]),t("div",Ae,g(e.$t("similar_products")),1),t("div",Pe,[(m(!0),p(L,null,I(u(B),(s,h)=>(m(),p("div",{key:s==null?void 0:s.uuid,class:"group relative md:w-[276px] w-[176px] product_item mb-3 hover:shadow-none md:hover:shadow-hero bg-[#D9D9D940] hover:bg-[#D9D9D940] transition-all ease-in-out duration-200 rounded-xl flex flex-col justify-between items-center"},[$(_,{item:s},null,8,["item"])]))),128))])])])}}},Ge=O(Ve,[["__scopeId","data-v-6194d592"]]);export{Ge as default};
