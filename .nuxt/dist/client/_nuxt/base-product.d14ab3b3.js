import{_ as C}from"./nuxt-link.dda338d1.js";import{_ as $}from"./like.ce290c70.js";import{_ as B}from"./TrashButtonAndCounter.97a8368a.js";import{u as g}from"./useMyFetch.2b768c83.js";import"./entry.84c95077.js";import{u as V}from"./favourite.9fe16a02.js";import{u as F}from"./authStore.55b73077.js";import{a as b,b as N,Z as L,I as T,H as x,M as P,R as r,u as a,U as y,Q as A,K as E,e as I,G as M}from"./swiper-vue.406cf000.js";const O=""+new URL("new.2353a627.png",import.meta.url).href,R=["src"],U={class:"w-fit mx-auto font-medium md:text-3xl text-base font-alatsi text-[#3C4242] mt-3 mb-1"},z={class:"mx-auto font-semibold text-[#48BC4E] text-3xl font-alatsi w-fit pb-1 border-b border-[#44A4DB]"},D={key:0,class:"absolute -top-[10px] -left-[11px]"},j=r("img",{class:"md:w-25 w-18",src:O,alt:""},null,-1),q=[j],G={class:"absolute top-5 right-5"},tt={__name:"base-product",props:{item:{type:Object,default:{}}},setup(f){var w;const v=f,d=V(),e=b({}),i=F();e.value=v.item,(w=d.wish_items)==null||w.forEach(async t=>{t.uuid==v.item.uuid?e.value.isLiked=!0:e.isLiked==!1});const S=async t=>{var o,c,p,_,u,s,l,n;if((o=i.userToken)!=null&&o.uuid){const{data:h}=await g(`/api/v1/client/wish-list?lang=tm&user_id=${(c=i.userToken)==null?void 0:c.uuid}`);(p=h.value)!=null&&p.status&&((_=h.value.data)==null||_.filter(k=>{k.images=k.img_path}),d.wish_items=h.value.data)}t.isLiked?(t.isLiked=!1,d.removeLocalStorage(t),(u=i.userToken)!=null&&u.uuid&&await g(`/api/v1/client/wish-list/delete/${(s=i.userToken)==null?void 0:s.uuid}/${t.uuid}`,{method:"POST"})):(t.isLiked=!0,(l=i.userToken)!=null&&l.uuid&&g("/api/v1/client/wish-list/create",{method:"POST",body:{product_id:t.uuid,user_id:(n=i.userToken)==null?void 0:n.uuid}}),d.setLocalStorage(t))},m=b(null);return N(m,()=>{}),(t,o)=>{var u;const c=C,p=$,_=B;return L(),T(M,null,[x(c,{to:t.localePath(`/product/${(u=f.item)==null?void 0:u.uuid}`),class:"group rounded-xl w-full text-center"},{default:P(()=>{var s,l,n;return[r("img",{class:"border w-full aspect-square select-none rounded-md md:rounded-lg border-[#e6e6e6]",src:`http://duypbaha.com.tm/api/v1/uploads/images/${(s=a(e))==null?void 0:s.images}`,alt:"",height:"262",loading:"lazy"},null,8,R),r("div",U,y((l=a(e))==null?void 0:l.name),1),r("div",z,y((n=a(e))==null?void 0:n.price)+" TMT ",1)]}),_:1},8,["to"]),a(e).status?(L(),T("div",D,q)):A("",!0),r("div",G,[x(p,{fill:"none",onClick:o[0]||(o[0]=s=>S(a(e))),class:E([f.item.isLiked?"fill-red-600 text-red-600":" text-gray-400","group-hover:text-red-600 w-7"])},null,8,["class"])]),x(_,{class:"pt-5",item:a(e),modelValue:a(m),"onUpdate:modelValue":o[1]||(o[1]=s=>I(m)?m.value=s:null)},null,8,["item","modelValue"])],64)}}};export{tt as _,O as a};
