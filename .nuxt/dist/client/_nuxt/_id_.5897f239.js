import{_ as E}from"./like.ce290c70.js";import{_ as K}from"./TrashButtonAndCounter.fce86287.js";import{_ as z}from"./_plugin-vue_export-helper.c27b6911.js";import{Z as m,I as p,R as t,a as x,aa as j,u as n,H as $,K as q,G as L,Y as I,U as g,e as M,ad as H,al as N,a7 as G,a8 as Y}from"./swiper-vue.406cf000.js";import{_ as J}from"./base-product.5a8ef81f.js";import{c as Q,g as W,a as X,b as ee,m as te}from"./entry.377c9c4e.js";import{b as se,S as ae}from"./trash.938eefd6.js";import{u as y}from"./useMyFetch.67d3bca0.js";import{u as oe}from"./authStore.c153be1c.js";import{u as le}from"./favourite.b5565706.js";import"./trash.5beb687a.js";import"./nuxt-link.164f5bb6.js";import"./fetch.096dfd57.js";const ue={},ie=t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",fill:"currentColor"},[t("path",{d:"M120-160v-640l760 320-760 320Zm60-93 544-227-544-230v168l242 62-242 60v167Zm0 0v-457 457Z"})],-1),ne=[ie];function re(w,d){return m(),p("div",null,ne)}const de=z(ue,[["render",re]]);const F=w=>(G("data-v-f5d8da2e"),w=w(),Y(),w),ce={class:"aspect-[video] w-screen 2xl:w-[1428px] mx-auto flex justify-between items-start px-4 sm:flex-row flex-col"},me={class:"sm:w-[35%] w-full relative"},pe=["src"],_e={class:"absolute top-5 right-5"},ve={class:"w-full relative mt-5 flex justify-start"},fe=["src","onClick"],he={class:"w-[60%] sm:ml-6 ml-0 mt-6"},xe={class:"one_prod w-fit cursor-pointer transition-all duration-100 hover:text-[#44A4DB] md:text-5xl text-2xl mb-1 font-semibold font-inter"},ge={class:"sm:pt-1.5 pt-0 pb-1.5 md:text-xl text-lg sm:font-normal font-medium"},we={class:"flex items-center flex-wrap sm:px-4 px-1 py-2 border-t border-b border-gray-200"},be={class:"text-white cursor-pointer rounded-md text-2xl px-4 py-3 bg-[#44A4DB]"},ye={class:"w-fit md:ml-5 ml-1 pt-3"},ke=F(()=>t("p",null,"Kommentariya",-1)),Se={class:"min-w-[300px] w-auto flex gap-4"},$e={class:"w-screen 2xl:w-[1428px] mx-auto px-4 sm:flex-row flex-col"},Te={class:"bg-teal-100 mt-6"},De=F(()=>t("p",{class:"font-alatsi font-bold p-2"},"Kommentariyalar",-1)),Be={class:"odd:bg-teal-50 even:bg-teal-100 p-2 font-inter"},Ce={class:"mt-8 px-0 md:px-10 cursor-pointer transition-all duration-100 md:text-4xl text-2xl mb-1 font-semibold font-inter"},Le={style:{},class:"flex flex-wrap justify-between md:px-1 mt-2"},Ie={__name:"[id]",async setup(w){var V;let d,k;const T=le(),D=Q(),v=oe(),{locale:O}=W(),u=x(null),B=x([]),S=x(null),f=x(null),C=x(0),c=x(null);X();const A=ee(),P=`/api/v1/client/products/product/${A.params.id}?lang=${O.value}`,o=se(P,null,{serializer:ae.object}),R=async()=>{var a,i,l,r;if(!((a=f.value)!=null&&a.length))return D.error("kommentariya bosh bolmaly dal");if(!((i=v.userToken)!=null&&i.uuid))return D.error("Ulgama girin");const{data:e}=await y("/api/v1/client/comment/create",{method:"POST",body:{product_id:u.value.uuid,user_id:(l=v.userToken)==null?void 0:l.uuid,content:f.value}});(r=e.value)!=null&&r.status&&(f.value=null,D.success("Habarynyz garasylyar"))},{data:U}=([d,k]=j(()=>y(`/api/v1/client/products/product-comment?product_id=${A.params.id}&offset=0&limit=100`)),d=await d,k(),d);if(console.log(o.value,"lesson.value"),o.value)u.value=o.value.data.one_products,c.value=o.value.data.one_products,S.value=o.value.data.one_products.images[0],o.value.data.products.filter((e,a)=>{var i,l,r,_;o.value.data.one_products.uuid!==e.uuid?B.value.push(e):c.value={name:(i=o.value.data.one_products)==null?void 0:i.name,uuid:(l=o.value.data.one_products)==null?void 0:l.uuid,images:(r=o.value.data.one_products)==null?void 0:r.images[0].img_path,price:(_=o.value.data.one_products)==null?void 0:_.price}}),console.log("getting from cache");else{console.log(o.value,"lesson.value");const{data:e,error:a,status:i}=([d,k]=j(()=>y(P)),d=await d,k(),d);if(a.value)throw te({...a.value,statusMessage:"Could not fetch lesson"});o.value=e.value,i.value&&(u.value=e.value.data.one_products,c.value=e.value.data.one_products,S.value=e.value.data.one_products.images[0],e.value.data.products.filter((l,r)=>{var _,b,s,h;e.value.data.one_products.uuid!==l.uuid?B.value.push(l):c.value={name:(_=e.value.data.one_products)==null?void 0:_.name,uuid:(b=e.value.data.one_products)==null?void 0:b.uuid,images:(s=e.value.data.one_products)==null?void 0:s.images[0].img_path,price:(h=e.value.data.one_products)==null?void 0:h.price}}))}(V=T.wish_items)==null||V.forEach(async e=>{e.uuid==u.value.uuid?u.value.isLiked=!0:u.value.isLiked==!1});const Z=async e=>{var a,i,l,r;e.isLiked?(e.isLiked=!1,c.value={name:e==null?void 0:e.name,uuid:e==null?void 0:e.uuid,images:e==null?void 0:e.images[0].img_path,price:e==null?void 0:e.price},T.removeLocalStorage(c.value),(a=v.userToken)!=null&&a.uuid&&await y(`/api/v1/client/wish-list/delete/${(i=v.userToken)==null?void 0:i.uuid}/${e.uuid}`,{method:"POST"})):(e.isLiked=!0,c.value={name:e==null?void 0:e.name,uuid:e==null?void 0:e.uuid,images:e==null?void 0:e.images[0].img_path,price:e==null?void 0:e.price},(l=v.userToken)!=null&&l.uuid&&y("/api/v1/client/wish-list/create",{method:"POST",body:{product_id:e.uuid,user_id:(r=v.userToken)==null?void 0:r.uuid}}),T.setLocalStorage(c.value))};return(e,a)=>{var b;const i=E,l=K,r=de,_=J;return m(),p("div",null,[t("div",ce,[t("div",me,[t("img",{src:`http://duypbaha.com.tm/api/v1/uploads/images/${(b=n(S))==null?void 0:b.img_path}`,class:"w-full one_img rounded-md aspect-square",alt:""},null,8,pe),t("div",_e,[$(i,{fill:"none",onClick:a[0]||(a[0]=s=>Z(n(u))),class:q([n(u).isLiked?"fill-red-600 text-red-600":" text-white","hover:text-red-600 w-7"])},null,8,["class"])]),t("div",ve,[(m(!0),p(L,null,I(n(u).images,s=>(m(),p("img",{key:s.img_path,src:`http://duypbaha.com.tm/api/v1/uploads/images/${s==null?void 0:s.img_path}`,onClick:h=>S.value=s,class:"w-[19%] rounded-md aspect-square mr-2 border border-blue-200",alt:""},null,8,fe))),128))])]),t("div",he,[t("div",null,[t("div",xe,g(n(u).name),1),t("div",ge,g(n(u).description),1),t("div",we,[t("div",be,g(n(u).price)+" TMT ",1)]),t("div",ye,[$(l,{item:n(c),modelValue:n(C),"onUpdate:modelValue":a[1]||(a[1]=s=>M(C)?C.value=s:null)},null,8,["item","modelValue"])]),t("div",null,[ke,t("div",Se,[H(t("textarea",{class:"border border-[#44A4DB] p-2",type:"text","onUpdate:modelValue":a[2]||(a[2]=s=>M(f)?f.value=s:null)},null,512),[[N,n(f)]]),$(r,{onClick:R,class:"md:cursor-pointer self-end cursor-auto text-[#44A4DB] fill-[#44A4DB]"})])])])])]),t("div",$e,[t("div",Te,[De,t("ul",null,[(m(!0),p(L,null,I(n(U).data.comments,(s,h)=>(m(),p("li",Be,g(h+1)+": "+g(s.content),1))),256))])]),t("div",Ce,g(e.$t("similar_products")),1),t("div",Le,[(m(!0),p(L,null,I(n(B),(s,h)=>(m(),p("div",{key:s==null?void 0:s.uuid,class:"group relative md:w-[276px] w-[176px] product_item mb-3 hover:shadow-none md:hover:shadow-hero bg-[#D9D9D940] hover:bg-[#D9D9D940] transition-all ease-in-out duration-200 rounded-xl flex flex-col justify-between items-center"},[$(_,{item:s},null,8,["item"])]))),128))])])])}}},qe=z(Ie,[["__scopeId","data-v-f5d8da2e"]]);export{qe as default};
