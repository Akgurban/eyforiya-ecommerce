import{_ as L}from"./base-button.0f6fb678.js";import{_ as Q}from"./FilteredSidebar.6ae3886b.js";import{_ as T}from"./base-product.0bff633a.js";import{g as z,a as A,b as G,h as H}from"./entry.bfa7a906.js";import{u as D}from"./useMyFetch.a4389793.js";import{_ as U}from"./filter.ac2462a9.js";import{_ as Y}from"./loader.7243108b.js";import{c as Z}from"./trash.6deb6e11.js";import{_ as K}from"./_plugin-vue_export-helper.c27b6911.js";import{a as _,aa as W,b as X,Z as m,I as h,R as l,H as q,M as ee,U as M,u as n,G as te,Y as se,Q as F,a7 as ae,a8 as oe}from"./swiper-vue.406cf000.js";import"./base-input.cd175c59.js";import"./v4.a960c1f4.js";import"./chevron-left.4af3a964.js";import"./nuxt-link.5dccc6ae.js";import"./like.ce290c70.js";import"./TrashButtonAndCounter.ba55ed52.js";import"./trash.5beb687a.js";import"./authStore.4421eb47.js";import"./favourite.47e3ed35.js";import"./fetch.f5b25f3c.js";const I=v=>(ae("data-v-d7cf1665"),v=v(),oe(),v),re={class:"2xl:w-[1440px] xl:screen mx-auto"},le={class:"flex justify-between"},ie=I(()=>l("div",null,null,-1)),ue=I(()=>l("img",{src:U,class:"inline w-5",alt:""},null,-1)),ne={class:"lead flex gap-5"},ce={class:"md:block hidden w-full 2xl:w-[25%] lg:w-[28%] z-20"},de={class:"md:hidden absolute block w-full 2xl:w-[25%] lg:w-[28%]"},_e={style:{"padding-bottom":"20px !important"},class:"flex w-full flex-wrap gap-3 md:justify-start justify-center mt-2 mx-auto"},fe=I(()=>l("br",null,null,-1)),pe={key:0,class:"w-full"},me=I(()=>l("img",{src:Y,class:"mx-auto",alt:""},null,-1)),he=[me],ve={key:1,class:"mt-20 text-center w-full text-6xl text-gray-500 font-alatsi font-bold"},ye={__name:"[id]",async setup(v){var J,C,j;let $,k;const{locale:N,locales:R}=z(),P=A(),e=G(),a=_(""),E=_(null);_(15);const p=_(1),y=_(28),b=_(!0),w=_(!1);_(""),w.value||Z(E,async()=>{var s,r,o,i,u,c,d;if(p.value<=Math.floor(((s=a.value)==null?void 0:s.product_count)/y.value)){p.value+=1;var t={lang:N.value,order:e.query.order,limit:y.value,offset:p.value-1,criteria:e.params.id};(r=e.query)!=null&&r.filter&&((i=JSON.parse((o=e.query)==null?void 0:o.filter))!=null&&i.length)&&(t.brand_id=JSON.parse((u=e.query)==null?void 0:u.filter)),e.params.id,e.query.catId&&(t.sub_category_id=e.query.catId),w.value=!0;const{data:g,status:x}=await D(()=>"/api/v1/client/products/product/search",{method:"POST",body:t});x&&(w.value=!1,console.log(p.value,Math.floor(((c=a.value)==null?void 0:c.product_count)/y.value)+1),(d=g.value)==null||d.data.products.forEach(S=>a.value.products.push(S)))}},{distance:20}),H("$nSBQRx6rM0");async function O(t){R.value.forEach(s=>{s.code==N.value&&P.push({path:`${s.code2}/search/${e.params.id}`,query:{filter:JSON.stringify(t.brnd),order:t.ord}})})}const V=()=>{b.value=!b.value},B=async()=>{var o,i,u,c,d;var t={lang:N.value,order:e.query.order,limit:y.value,offset:p.value-1,criteria:e.params.id};(o=e.query)!=null&&o.filter&&((u=JSON.parse((i=e.query)==null?void 0:i.filter))!=null&&u.length)&&(t.brand_id=JSON.parse((c=e.query)==null?void 0:c.filter)),e.params.id,e.query.catId&&(t.sub_category_id=e.query.catId);const{data:s,status:r}=await D(()=>"/api/v1/client/products/product/search",{method:"POST",body:t});r&&(a.value=(d=s.value)==null?void 0:d.data)};return[$,k]=W(()=>B()),await $,k(),(J=e.query)!=null&&J.filter&&a.value&&((j=(C=a.value)==null?void 0:C.brands)==null||j.forEach(t=>{var s,r;(r=JSON.parse((s=e.query)==null?void 0:s.filter))==null||r.forEach(o=>{o==t.uuid&&(t.selected=!0)})})),X(()=>e.query,async()=>{var t,s;await B(),(s=(t=a.value)==null?void 0:t.brands)==null||s.forEach(r=>{var o,i;(i=JSON.parse((o=e.query)==null?void 0:o.filter))==null||i.forEach(u=>{u==r.uuid&&(r.selected=!0)})})}),(t,s)=>{var u,c,d,g,x,S;const r=L,o=Q,i=T;return m(),h("div",re,[l("div",le,[ie,q(r,{onClick:V,class:"self-end w-32 lg:hidden flex justify-between",type:"secondary"},{default:ee(()=>[l("p",null,M(n(b)?t.$t("close_filter"):t.$t("show_filter")),1),ue]),_:1})]),l("div",ne,[l("div",ce,[q(o,{brands:(u=n(a))==null?void 0:u.brands,show_cat:!1,sub_categories:(c=n(a))==null?void 0:c.sub_categories,onSomeChange:s[0]||(s[0]=f=>O(f))},null,8,["brands","sub_categories"])]),l("div",de,[q(o,{show_filter:n(b),brands:(d=n(a))==null?void 0:d.brands,show_cat:!1,sub_categories:(g=n(a))==null?void 0:g.sub_categories,onSomeChange:s[1]||(s[1]=f=>O(f))},null,8,["show_filter","brands","sub_categories"])]),l("div",{ref_key:"listEl",ref:E,class:"w-full h-[80vh] overflow-auto"},[l("div",_e,[(m(!0),h(te,null,se((x=n(a))==null?void 0:x.products,(f,be)=>(m(),h("div",{key:f,draggable:"true",class:"group relative md:w-[266px] w-[176px] product_item mb-3 hover:shadow-none md:hover:shadow-hero hover:bg-[#D9D9D940] transition-all ease-in-out duration-200 rounded-xl flex flex-col justify-between items-center"},[q(i,{item:f},null,8,["item"])]))),128)),fe,n(w)?(m(),h("div",pe,he)):F("",!0),(S=n(a))!=null&&S.products?F("",!0):(m(),h("div",ve,M(t.$t("no_product")),1))])],512)])])}}},Ve=K(ye,[["__scopeId","data-v-d7cf1665"]]);export{Ve as default};
