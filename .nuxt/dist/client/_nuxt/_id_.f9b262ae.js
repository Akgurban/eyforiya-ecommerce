import{_ as H}from"./like.ce290c70.js";import{_ as q}from"./TrashButtonAndCounter.21828bf0.js";import{_ as F}from"./_plugin-vue_export-helper.c27b6911.js";import{Z as p,I as _,R as t,a as x,aa as M,u as i,H as $,K as N,G as C,Y as L,U as m,e as z,ad as G,al as K}from"./swiper-vue.406cf000.js";import{_ as Y}from"./base-product.fad2a1a9.js";import{c as J,g as Q,a as W,b as X,m as ee,u as te}from"./entry.20de8b78.js";import{b as se,S as oe}from"./trash.98aacda8.js";import{u as b}from"./useMyFetch.5f947471.js";import{u as ae}from"./authStore.b7218c75.js";import{u as le}from"./favourite.a0934c96.js";import"./trash.5beb687a.js";import"./nuxt-link.bb2e9639.js";import"./fetch.cad9ce74.js";const ue={},ne=t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",fill:"currentColor"},[t("path",{d:"M120-160v-640l760 320-760 320Zm60-93 544-227-544-230v168l242 62-242 60v167Zm0 0v-457 457Z"})],-1),ie=[ne];function re(O,d){return p(),_("div",null,ie)}const de=F(ue,[["render",re]]);const ce={class:"group aspect-[video] w-screen 2xl:w-[1428px] mx-auto flex justify-between items-start px-4 sm:flex-row flex-col"},me={class:"sm:w-[35%] w-full relative"},pe=["src"],_e={class:"absolute top-5 right-5"},ve={class:"w-full relative mt-5 flex justify-start"},fe=["src","onClick"],ge={class:"w-[60%] sm:ml-6 ml-0 mt-6"},he={class:"one_prod w-fit cursor-pointer transition-all duration-100 hover:text-[#44A4DB] md:text-5xl text-2xl mb-1 font-semibold font-inter"},xe={class:"sm:pt-1.5 pt-0 pb-1.5 md:text-xl text-lg sm:font-normal font-medium"},we={class:"flex items-center flex-wrap sm:px-4 px-1 py-2 border-t border-b border-gray-200"},be={class:"text-white cursor-pointer rounded-md text-2xl px-4 py-3 bg-[#44A4DB]"},ye={class:"md:ml-5 ml-1 pt-3 w-55"},ke={class:"min-w-[300px] w-auto flex gap-4"},$e={class:"w-screen 2xl:w-[1428px] mx-auto px-4 sm:flex-row flex-col"},Se={class:"bg-teal-100 mt-6"},Te={class:"font-alatsi font-bold p-2 uppercase"},De={class:"odd:bg-teal-50 even:bg-teal-100 p-2 font-inter"},Be={class:"mt-8 px-0 md:px-10 cursor-pointer transition-all duration-100 md:text-4xl text-2xl mb-1 font-semibold font-inter"},Ce={style:{},class:"flex flex-wrap justify-start md:px-1 mt-2"},Le={__name:"[id]",async setup(O){var I,V,j;let d,y;const S=le(),T=J(),f=ae(),{locale:R}=Q(),a=x(null),D=x([]),k=x(null),g=x(null),B=x(0),c=x(null);W();const A=X(),P=`/api/v1/client/products/product/${A.params.id}?lang=${R.value}`,l=se(P,null,{serializer:oe.object}),U=async()=>{var o,n,u,r;if(!((o=g.value)!=null&&o.length))return T.error("kommentariya bosh bolmaly dal");if(!((n=f.userToken)!=null&&n.uuid))return T.error("Ulgama girin");const{data:e}=await b("/api/v1/client/comment/create",{method:"POST",body:{product_id:a.value.uuid,user_id:(u=f.userToken)==null?void 0:u.uuid,content:g.value}});(r=e.value)!=null&&r.status&&(g.value=null,T.success("Habarynyz garasylyar"))},{data:Z}=([d,y]=M(()=>b(`/api/v1/client/products/product-comment?product_id=${A.params.id}&offset=0&limit=100`)),d=await d,y(),d);if(console.log(l.value,"lesson.value"),l.value)a.value=l.value.data.one_products,c.value=l.value.data.one_products,k.value=l.value.data.one_products.images[0],l.value.data.products.filter((e,o)=>{var n,u,r,v;l.value.data.one_products.uuid!==e.uuid?D.value.push(e):c.value={name:(n=l.value.data.one_products)==null?void 0:n.name,uuid:(u=l.value.data.one_products)==null?void 0:u.uuid,images:(r=l.value.data.one_products)==null?void 0:r.images[0].img_path,price:(v=l.value.data.one_products)==null?void 0:v.price}}),console.log("getting from cache");else{console.log(l.value,"lesson.value");const{data:e,error:o,status:n}=([d,y]=M(()=>b(P)),d=await d,y(),d);if(o.value)throw ee({...o.value,statusMessage:"Could not fetch lesson"});l.value=e.value,n.value&&(a.value=e.value.data.one_products,c.value=e.value.data.one_products,k.value=e.value.data.one_products.images[0],e.value.data.products.filter((u,r)=>{var v,w,s,h;e.value.data.one_products.uuid!==u.uuid?D.value.push(u):c.value={name:(v=e.value.data.one_products)==null?void 0:v.name,uuid:(w=e.value.data.one_products)==null?void 0:w.uuid,images:(s=e.value.data.one_products)==null?void 0:s.images[0].img_path,price:(h=e.value.data.one_products)==null?void 0:h.price}}))}(I=S.wish_items)==null||I.forEach(async e=>{e.uuid==a.value.uuid?a.value.isLiked=!0:a.value.isLiked==!1});const E=async e=>{var o,n,u,r;e.isLiked?(e.isLiked=!1,c.value={name:e==null?void 0:e.name,uuid:e==null?void 0:e.uuid,images:e==null?void 0:e.images[0].img_path,price:e==null?void 0:e.price},S.removeLocalStorage(c.value),(o=f.userToken)!=null&&o.uuid&&await b(`/api/v1/client/wish-list/delete/${(n=f.userToken)==null?void 0:n.uuid}/${e.uuid}`,{method:"POST"})):(e.isLiked=!0,c.value={name:e==null?void 0:e.name,uuid:e==null?void 0:e.uuid,images:e==null?void 0:e.images[0].img_path,price:e==null?void 0:e.price},(u=f.userToken)!=null&&u.uuid&&b("/api/v1/client/wish-list/create",{method:"POST",body:{product_id:e.uuid,user_id:(r=f.userToken)==null?void 0:r.uuid}}),S.setLocalStorage(c.value))};return te({title:(V=a.value)==null?void 0:V.name,meta:[{name:"description",content:(j=a.value)==null?void 0:j.description}]}),(e,o)=>{var w;const n=H,u=q,r=de,v=Y;return p(),_("div",null,[t("div",ce,[t("div",me,[t("img",{src:`http://duypbaha.com.tm/api/v1/uploads/images/${(w=i(k))==null?void 0:w.img_path}`,class:"w-full one_img rounded-md aspect-square",alt:""},null,8,pe),t("div",_e,[$(n,{fill:"none",onClick:o[0]||(o[0]=s=>E(i(a))),class:N([i(a).isLiked?"fill-red-600 text-red-600":" text-gray-400","group-hover:text-red-600 w-7"])},null,8,["class"])]),t("div",ve,[(p(!0),_(C,null,L(i(a).images,s=>(p(),_("img",{key:s.img_path,src:`http://duypbaha.com.tm/api/v1/uploads/images/${s==null?void 0:s.img_path}`,onClick:h=>k.value=s,class:"w-[19%] rounded-md aspect-square mr-2 border border-blue-200",alt:""},null,8,fe))),128))])]),t("div",ge,[t("div",null,[t("div",he,m(i(a).name),1),t("div",xe,m(i(a).description),1),t("div",we,[t("div",be,m(i(a).price)+" TMT ",1)]),t("div",ye,[$(u,{item:i(c),modelValue:i(B),"onUpdate:modelValue":o[1]||(o[1]=s=>z(B)?B.value=s:null)},null,8,["item","modelValue"])]),t("div",null,[t("p",null,m(e.$t("comment")),1),t("div",ke,[G(t("textarea",{class:"border border-[#44A4DB] p-2",type:"text","onUpdate:modelValue":o[2]||(o[2]=s=>z(g)?g.value=s:null)},null,512),[[K,i(g)]]),$(r,{onClick:U,class:"md:cursor-pointer self-end cursor-auto text-[#44A4DB] fill-[#44A4DB]"})])])])])]),t("div",$e,[t("div",Se,[t("p",Te,m(e.$t("comments")),1),t("ul",null,[(p(!0),_(C,null,L(i(Z).data.comments,(s,h)=>(p(),_("li",De,m(h+1)+": "+m(s.content),1))),256))])]),t("div",Be,m(e.$t("similar_products")),1),t("div",Ce,[(p(!0),_(C,null,L(i(D),(s,h)=>(p(),_("div",{key:s==null?void 0:s.uuid,class:"group relative md:w-[276px] w-[176px] product_item mb-3 hover:shadow-none md:hover:shadow-hero bg-[#D9D9D940] hover:bg-[#D9D9D940] transition-all ease-in-out duration-200 rounded-xl flex flex-col justify-between items-center"},[$(v,{item:s},null,8,["item"])]))),128))])])])}}},He=F(Le,[["__scopeId","data-v-6c116725"]]);export{He as default};
