import{_ as z}from"./base-input.cd175c59.js";import{c as A,a as H}from"./entry.0e1dff64.js";import{u as I}from"./fetch.9d574d35.js";import{u as N}from"./useMyFetch.b5f0c96b.js";import{_ as K}from"./logo.ee53cbec.js";import{_ as M}from"./loader.dcd685a0.js";import{u as q}from"./authStore.469b83a5.js";import{u as D}from"./loader.080297c9.js";import{u as G}from"./favourite.a14f3568.js";import{a as J}from"./trash.7f2b6c62.js";import{a as m,Z as h,I as g,R as o,u as c,H as R,e as Z,Q as L}from"./swiper-vue.406cf000.js";import"./v4.a960c1f4.js";const W={class:"flex justify-center pt-34 md:pt-40 h-[110vh] absolute top-0 bg-slate-300 z-40 w-full"},X={class:"w-full max-w-md"},Y=o("div",{class:"text-3xl font-bold text-center mb-6 flex w-full justify-between"},null,-1),ee={class:"bg-c-gray shadow-lg rounded px-8 pt-6 pb-8 mb-4"},te={class:"mb-4"},ae={class:"mb-6"},se={key:0,class:"text-red-500 text-sm inter font-bold mb-4"},oe={class:"flex w-full gap-5 items-center justify-between"},le={key:0,class:"p-2 rounded-md text-white font-bold"},ue=o("img",{src:M,alt:""},null,-1),re=[ue],Se={__name:"login",setup(ne){const _=A(),p=G(),O=J();D();const l=m(""),u=m(""),r=m(!1),f=m(!0),i=q(),w=H();async function Q(){var a,s;try{if(!l.value||!u.value){f.value=!1;return}r.value=!0;const{data:n,pending:t,status:v,error:d}=await I("http://duypbaha.com.tm/api/v1/client/user-register",{method:"POST",body:{username:l.value,password:u.value}},"$tvQ2ZBkkKn");if(console.log(d),((a=d.value)==null?void 0:a.fatal)==!1)return r.value=!1,_.error("username exist");(s=n.value)!=null&&s.status&&await b(),t&&(r.value=!0),r.value=!1}catch(n){throw n}}async function b(){var v,d,y,x,k,S,T,V,$,B,P,C,U,E,j,F;try{if(!l.value||!u.value){f.value=!1;return}r.value=!0;const{data:e,pending:ie,status:de,error:ce}=await I("http://duypbaha.com.tm/api/v1/client/user/login",{method:"POST",body:{username:l.value,password:u.value}},"$hCTBEZ0wEo");i.userToken=(v=e.value)==null?void 0:v.auth,e.value.status||_.error(e.value.message),r.value=!1}catch(e){console.log(e)}try{if((d=i.userToken)!=null&&d.uuid)var{data:a,error:s,status:n}=await N(`/api/v1/client/wish-list?lang=tm&user_id=${(y=i.userToken)==null?void 0:y.uuid}`);console.log(a.value.status,"wish_user.value"),a.value.status&&((k=(x=a.value)==null?void 0:x.data)!=null&&k.length)?(p.wish_items=[],console.log("[][]"),(S=a.value.data)==null||S.filter(e=>{e.images=e.img_path,p.setLocalStorage(e)})):(V=(T=a.value)==null?void 0:T.data)!=null&&V.length||(p.wish_items=[])}catch(e){console.log(e)}try{if(($=i.userToken)!=null&&$.uuid)var{data:t}=await N(`/api/v1/client/trash?user_id=${(B=i.userToken)==null?void 0:B.uuid}&lang=tm`);(P=t.value)!=null&&P.status&&((U=(C=t.value)==null?void 0:C.data)!=null&&U.length)&&((j=(E=t.value)==null?void 0:E.data)==null||j.filter(e=>{e.images=e.img_path}),O.trash_items.products=(F=t.value)==null?void 0:F.data),w.push("/")}catch(e){console.log(e)}}return(a,s)=>{const n=z;return h(),g("div",W,[o("div",X,[Y,o("form",ee,[o("img",{class:"mx-auto md:cursor-pointer cursor-auto",onClick:s[0]||(s[0]=t=>c(w).push(a.localePath("/"))),src:K,alt:""}),o("div",te,[R(n,{label:"Username",id:"username",name:"username",type:"text",placeholder:"Username",modelValue:c(l),"onUpdate:modelValue":s[1]||(s[1]=t=>Z(l)?l.value=t:null)},null,8,["modelValue"])]),o("div",ae,[R(n,{label:"Password",id:"password",name:"password",type:"password",placeholder:"Password",modelValue:c(u),"onUpdate:modelValue":s[2]||(s[2]=t=>Z(u)?u.value=t:null)},null,8,["modelValue"])]),c(f)?L("",!0):(h(),g("p",se," Please fill all the forms ")),o("div",oe,[o("button",{class:"bg-blue-700 rounded-2xl w-1/2 text-white font-bold py-2 px-4 focus:outline-none focus:shadow-outline",type:"button",onClick:b}," Sign In "),c(r)?(h(),g("p",le,re)):L("",!0),o("button",{class:"bg-green-700 rounded-2xl w-1/2 text-white font-bold py-2 px-4 focus:outline-none focus:shadow-outline",type:"button",onClick:Q}," Sign up ")])])])])}}};export{Se as default};
