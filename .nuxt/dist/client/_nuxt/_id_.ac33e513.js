import{_ as D}from"./base-input.ad203584.js";import{_ as N,a as S,e as L,b as A,f as I}from"./entry.54e19d71.js";import{L as r,M as n,X as s,a as h,b as B,G as C,a1 as k,H as v,u as _,Y as x,Z as E,a7 as O,a8 as z,a0 as F,a2 as J,N as T,a4 as V}from"./swiper-vue.00c128fd.js";import{_ as M}from"./nuxt-link.9f886ca5.js";import{u as H,_ as U}from"./useMyFetch.3511e02c.js";import"./v4.a960c1f4.js";import"./trash.ad289512.js";import"./fetch.bdc3b3d4.js";import"./authStore.0f721ceb.js";const j={},G={width:"12",height:"18",viewBox:"0 0 12 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},P=s("path",{d:"M11.342 1.92793L4.27089 8.99903L11.342 16.07L9.5742 17.8378L0.735352 8.99903L9.5742 0.160156L11.342 1.92793Z",fill:"currentColor"},null,-1),R=[P];function X(f,u){return r(),n("svg",G,R)}const Z=N(j,[["render",X]]),Y={class:"relative px-2 py-2 lg:block hidden 2xl:w-[25%] lg:w-[28%] pb-10 bg-slate-100 rounded-md p-4"},K=s("div",{class:"text-2xl font-alatsi mb-2"},"Tertip",-1),Q={class:"flex items-center gap-2"},W={class:"font-alatsi text-base"},ee={class:"mt-5"},te=s("div",{class:"text-2xl font-alatsi mb-2"},"Icki kategoriya saylan",-1),se={key:0,class:"ml-5"},ae=["onClick"],oe={class:"relative mt-5"},re=s("div",{class:"text-2xl font-alatsi mb-2"},"Brend",-1),ne={class:"right-0 border-t-2 h-auto duration-250 ease-in-out z-10 w-full"},ce=["onClick"],le={class:"py-2 px-5 hover:bg-gray-100 cursor-pointer"},de={class:"flex items-center justify-start gap-2"},ie={class:"h-4 w-4"},ue=["onUpdate:modelValue"],_e={class:"font-alatsi text-base hover:text-[#44A4DB] cursor-auto md:cursor-pointer"},pe={__name:"FilteredSidebar",props:{brands:{type:Array,default:[]},sub_categories:{type:Array,default:[]}},emits:["someChange"],setup(f,{emit:u}){var o;const y=f,m=S(),a=h("desc");m.query.order&&(a.value=m.query.order);const d=h([{code:"desc",name:"Hic hili"},{code:"asc",name:"Arzandan gymmada"},{code:"desc",name:"Gymmatdan arzana"}]),c=h([]),i=h("");(o=y.brands)==null||o.forEach(e=>{var l;(l=JSON.parse(m.query.filter))==null||l.forEach(p=>{p==e.uuid&&(e.selected=!0,c.value.push(e.uuid))})});const b=async e=>{e.selected?(e.selected=!1,c.value.filter((l,p)=>{l==e.uuid&&c.value.splice(p,1)})):(e.selected=!0,c.value.push(e.uuid)),u("someChange",{sub:i.value,ord:a.value,brnd:c.value})};function g(e){a.value=e.code,u("someChange",{sub:i.value,ord:a.value,brnd:c.value})}return B(i,()=>{u("someChange",{sub:i.value,ord:a.value,brnd:c.value})}),B(c,()=>{u("someChange",{sub:i.value,ord:a.value,brnd:c.value})}),(e,l)=>{const p=D,$=Z;return r(),n("div",Y,[s("div",null,[K,s("div",null,[(r(!0),n(C,null,k(_(d),t=>(r(),n("div",Q,[v(p,{onChange:w=>g(t),heightFull:"",class:"w-5 h-5",type:"radio",name:"price-filter",checked:t.code==_(a)},null,8,["onChange","checked"]),s("div",W,x(t.name),1)]))),256))])]),s("div",ee,[te,_(m).query.catId?(r(),n("div",{key:1,onClick:l[0]||(l[0]=t=>i.value=null),class:"text-[#44A4DB] md:cursor-pointer cursor-auto font-alatsi ml-5"},[v($,{class:"inline text-[#44A4DB]"}),E(" = yza Cyk ")])):(r(),n("div",se,[(r(!0),n(C,null,k(f.sub_categories,t=>(r(),n("p",{onClick:w=>i.value=t.name,class:"font-alatsi hover:text-[#44A4DB] cursor-auto md:cursor-pointer"},x(t.uuid),9,ae))),256))]))]),s("div",oe,[re,s("div",null,[s("div",ne,[(r(!0),n(C,null,k(f.brands,(t,w)=>(r(),n("ul",{onClick:q=>b(t),key:w},[s("li",le,[s("div",de,[s("div",ie,[O(s("input",{"onUpdate:modelValue":q=>t.selected=q,type:"checkbox"},null,8,ue),[[z,t.selected]])]),s("div",_e,x(t.brand_name),1)])])],8,ce))),128))])])])])}}};const me={class:"2xl:w-[1440px] xl:screen mx-auto"},fe={class:"lead flex gap-5"},he={style:{width:"97% !important",height:"auto !important","user-select":"none !important","padding-bottom":"20px !important"},class:"flex flex-wrap gap-3"},ve=["src"],xe={class:"mx-auto text-[#48BC4E] text-3xl font-alatsi w-fit pb-1 border-b border-[#44A4DB]"},ye={key:0,class:"mt-20 text-center w-full text-6xl text-gray-500 font-alatsi font-bold"},be={__name:"[id]",async setup(f){var g;let u,y;L();const m=A(),a=S(),d=h(""),c=I("$5CUfd3qgOX");async function i(o){console.log("pp"),m.push({path:`/filtered-product/${a.params.id}`,query:{filter:JSON.stringify(o.brnd),order:o.ord,catId:o.sub}})}const b=async()=>{let o={category_id:a.params.id,lang:"tm",limit:10,offset:0};JSON.parse(a.query.filter).length&&(o.brand_id=JSON.parse(a.query.filter)),a.query.order&&(o.order=a.query.order),a.query.catId&&(o.sub_category_id=a.query.catId);const{data:e,status:l}=await H(()=>"/api/v1/client/products/product",{method:"POST",body:o});d.value=e.value.data,l&&console.log(e.value.data,"geldi========")};return[u,y]=F(()=>b()),await u,y(),(g=d.value.brands)==null||g.forEach(o=>{a.query.filter,JSON.parse(a.query.filter).forEach(e=>{e==o.uuid&&(o.selected=!0)})}),B(()=>a.query,async()=>{await b(),console.log("refetch"),d.value.brands.forEach(o=>{JSON.parse(a.query.filter).forEach(e=>{e==o.uuid&&(o.selected=!0)})})}),(o,e)=>{const l=pe,p=M,$=U;return r(),n("div",me,[s("div",fe,[v(l,{brands:_(d).brands,sub_categories:_(d).sub_categories,onSomeChange:e[0]||(e[0]=t=>i(t))},null,8,["brands","sub_categories"]),s("div",he,[(r(!0),n(C,null,k(_(d).products,(t,w)=>(r(),n("div",{key:t,draggable:"true",class:"group md:w-auto w-[176px] product_item mb-3 hover:shadow-none md:hover:shadow-hero hover:bg-[#D9D9D940] transition-all ease-in-out duration-200 rounded-xl flex flex-col justify-between items-center"},[v(p,{onClick:q=>c.value=t.uuid,to:o.localePath(`/product/${t.uuid}`),class:"rounded-xl text-center mt-6"},{default:T(()=>[s("img",{class:"border pointer-events-none select-none border-[#e6e6e6] w-[90%] md:w-[245px] mx-3 aspect-square",src:`http://duypbaha.com.tm/api/v1/uploads/images/${t.images}`,alt:"",loading:"lazy"},null,8,ve),s("div",{class:V(["prod_name w-fit mx-auto md:text-3xl text-base font-alatsi text-[#3C4242] mt-3 mb-1",{active:_(c)===t.uuid}])},x(t.name),3),s("div",xe,x(t.price)+" TMT ",1)]),_:2},1032,["onClick","to"]),v($)]))),128)),_(d).products?J("",!0):(r(),n("div",ye," Hic hili Haryt tapylmady! "))])])])}}},De=N(be,[["__scopeId","data-v-f1c1347f"]]);export{De as default};
