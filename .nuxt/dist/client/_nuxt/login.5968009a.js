import{_ as A}from"./base-input.20ca132f.js";import{c as D,a as H}from"./entry.c80f5040.js";import{u as R}from"./fetch.7ac89bf4.js";import{u as Z}from"./useMyFetch.120a421e.js";import{_ as K}from"./logo.e5d2cbb5.js";import{_ as M}from"./loader.1e7de48f.js";import{u as q}from"./authStore.683feaee.js";import{u as G}from"./loader.40ba2c26.js";import{u as J}from"./favourite.c4ead402.js";import{a as W}from"./trash.376bfbcf.js";import{a as m,Z as _,I as b,R as s,u as i,H as I,e as L,U as p,Q as O}from"./swiper-vue.91aa2a35.js";import"./v4.a960c1f4.js";const X={class:"flex justify-center pt-34 md:pt-40 h-[110vh] absolute top-0 bg-slate-300 z-40 w-full"},Y={class:"w-full max-w-md"},ee=s("div",{class:"text-3xl font-bold text-center mb-6 flex w-full justify-between"},null,-1),te={class:"bg-c-gray shadow-lg rounded px-8 pt-6 pb-8 mb-4"},ae={class:"mb-4"},se={class:"mb-6"},oe={class:"text-xs text-gray-400 mb-3"},le={key:0,class:"text-red-500 text-sm inter font-bold mb-4"},ue={class:"flex w-full gap-5 items-center justify-between"},re={key:0,class:"p-2 rounded-md text-white font-bold"},ne=s("img",{src:M,alt:""},null,-1),ie=[ne],Te={__name:"login",setup(de){D();const f=J(),Q=W();G();const l=m(""),u=m(""),v=m("user_exist"),r=m(!1),h=m(!0),d=q(),w=H();async function z(){var e,o;try{if(!l.value||!u.value){l.value="",u.value="";return}r.value=!0;const{data:n,pending:a,status:g,error:c}=await R("http://duypbaha.com.tm/api/v1/client/user-register",{method:"POST",body:{username:l.value,password:u.value}},"$tvQ2ZBkkKn");if(console.log(c),((e=c.value)==null?void 0:e.fatal)==!1){r.value=!1,v.value="user_exist",h.value=!1;return}(o=n.value)!=null&&o.status&&await y(),a&&(r.value=!0),r.value=!1}catch(n){throw n}}async function y(){var g,c,x,k,$,S,T,V,B,C,E,U,j,F,N,P;try{if(!l.value||!u.value){l.value="",u.value="";return}r.value=!0;const{data:t,pending:ce,status:me,error:pe}=await R("http://duypbaha.com.tm/api/v1/client/user/login",{method:"POST",body:{username:l.value,password:u.value}},"$hCTBEZ0wEo");d.userToken=(g=t.value)==null?void 0:g.auth,t.value.status||(h.value=!1,v.value="not_correct_data"),r.value=!1}catch(t){console.log(t)}try{if((c=d.userToken)!=null&&c.uuid)var{data:e,error:o,status:n}=await Z(`/api/v1/client/wish-list?lang=tm&user_id=${(x=d.userToken)==null?void 0:x.uuid}`);console.log(e.value.status,"wish_user.value"),e.value.status&&(($=(k=e.value)==null?void 0:k.data)!=null&&$.length)?(f.wish_items=[],console.log("[][]"),(S=e.value.data)==null||S.filter(t=>{t.images=t.img_path,f.setLocalStorage(t)})):(V=(T=e.value)==null?void 0:T.data)!=null&&V.length||(f.wish_items=[])}catch(t){console.log(t)}try{if((B=d.userToken)!=null&&B.uuid)var{data:a}=await Z(`/api/v1/client/trash?user_id=${(C=d.userToken)==null?void 0:C.uuid}&lang=tm`);(E=a.value)!=null&&E.status&&((j=(U=a.value)==null?void 0:U.data)!=null&&j.length)&&((N=(F=a.value)==null?void 0:F.data)==null||N.filter(t=>{t.images=t.img_path}),Q.trash_items.products=(P=a.value)==null?void 0:P.data),w.push("/")}catch(t){console.log(t)}}return(e,o)=>{const n=A;return _(),b("div",X,[s("div",Y,[ee,s("form",te,[s("img",{class:"mx-auto md:cursor-pointer cursor-auto",onClick:o[0]||(o[0]=a=>i(w).push(e.localePath("/"))),src:K,alt:""}),s("div",ae,[I(n,{label:e.$t("username"),id:"username",name:"username",type:"text",placeholder:"aman@example.com",modelValue:i(l),"onUpdate:modelValue":o[1]||(o[1]=a=>L(l)?l.value=a:null)},null,8,["label","modelValue"])]),s("div",se,[I(n,{label:e.$t("password"),id:"password",name:"password",type:"password",placeholder:"···········",modelValue:i(u),"onUpdate:modelValue":o[2]||(o[2]=a=>L(u)?u.value=a:null)},null,8,["label","modelValue"])]),s("p",oe,p(e.$t("alert_login")),1),i(h)?O("",!0):(_(),b("p",le,p(e.$t(i(v))),1)),s("div",ue,[s("button",{class:"bg-blue-700 rounded-2xl w-1/2 text-white font-bold py-2 px-4 focus:outline-none focus:shadow-outline",type:"button",onClick:y},p(e.$t("signin")),1),i(r)?(_(),b("p",re,ie)):O("",!0),s("button",{class:"text-blue-700 border-blue-700 border-2 rounded-2xl w-1/2 font-bold py-2 px-4 focus:outline-none focus:shadow-outline",type:"button",onClick:z},p(e.$t("signup")),1)])])])])}}};export{Te as default};
