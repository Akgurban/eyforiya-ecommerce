{"version":3,"file":"_id_-a37b7d69.js","sources":["../../../../pages/product/[id].vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div\r\n      class=\"aspect-[video] w-screen 2xl:w-[1428px] mx-auto flex justify-between items-start px-4 sm:flex-row flex-col\"\r\n    >\r\n      <div class=\"sm:w-[35%] w-full relative\">\r\n        <img\r\n          :src=\"`http://duypbaha.com.tm/api/v1/uploads/images/${selectedImg?.img_path}`\"\r\n          class=\"w-full one_img rounded-md aspect-square\"\r\n          alt=\"\"\r\n        />\r\n        <div class=\"absolute top-5 right-5\">\r\n          <IconLike\r\n            fill=\"none\"\r\n            @click=\"toggleFav(oneProduct)\"\r\n            :class=\"\r\n              oneProduct.isLiked ? 'fill-red-600 text-red-600' : ' text-white'\r\n            \"\r\n            class=\"hover:text-red-600 w-7\"\r\n          ></IconLike>\r\n        </div>\r\n        <div class=\"w-full relative mt-5 flex justify-start\">\r\n          <img\r\n            v-for=\"item in oneProduct.images\"\r\n            :key=\"item.img_path\"\r\n            :src=\"`http://duypbaha.com.tm/api/v1/uploads/images/${item?.img_path}`\"\r\n            @click.native=\"selectedImg = item\"\r\n            class=\"w-[19%] rounded-md aspect-square mr-2 border border-blue-200\"\r\n            alt=\"\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"w-[60%] sm:ml-6 ml-0 mt-6\">\r\n        <div>\r\n          <div\r\n            class=\"one_prod w-fit cursor-pointer transition-all duration-100 hover:text-[#44A4DB] md:text-5xl text-2xl mb-1 font-semibold font-inter\"\r\n          >\r\n            {{ oneProduct.name }}\r\n          </div>\r\n          <div\r\n            class=\"sm:pt-1.5 pt-0 pb-1.5 md:text-xl text-lg sm:font-normal font-medium\"\r\n          >\r\n            {{ oneProduct.description }}\r\n          </div>\r\n\r\n          <div\r\n            class=\"flex items-center flex-wrap sm:px-4 px-1 py-2 border-t border-b border-gray-200\"\r\n          >\r\n            <div\r\n              class=\"text-white cursor-pointer rounded-md text-2xl px-4 py-3 bg-[#44A4DB]\"\r\n            >\r\n              {{ oneProduct.price }} TMT\r\n            </div>\r\n          </div>\r\n          <div class=\"w-fit md:ml-5 ml-1 pt-3\">\r\n            <TrashButtonAndCounter\r\n              :item=\"changedOneProduct\"\r\n              v-model=\"oneCountProduct\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <p>Kommentariya</p>\r\n            <div class=\"min-w-[300px] w-auto flex gap-4\">\r\n              <textarea\r\n                class=\"border border-[#44A4DB] p-2\"\r\n                type=\"text\"\r\n                v-model=\"comment\"\r\n              />\r\n              <IconSend\r\n                @click=\"sendComment\"\r\n                class=\"md:cursor-pointer self-end cursor-auto text-[#44A4DB] fill-[#44A4DB]\"\r\n              ></IconSend>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"w-screen 2xl:w-[1428px] mx-auto px-4 sm:flex-row flex-col\">\r\n      <div class=\"bg-teal-100 mt-6\">\r\n        <p class=\"font-alatsi font-bold p-2\">Kommentariyalar</p>\r\n        <ul>\r\n          <li\r\n            v-for=\"(item, index) in comments.data.comments\"\r\n            class=\"odd:bg-teal-50 even:bg-teal-100 p-2 font-inter\"\r\n          >\r\n            {{ index + 1 }}: {{ item.content }}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div\r\n        class=\"mt-8 px-0 md:px-10 cursor-pointer transition-all duration-100 md:text-4xl text-2xl mb-1 font-semibold font-inter\"\r\n      >\r\n        {{ $t(\"similar_products\") }}\r\n      </div>\r\n\r\n      <div style=\"\" class=\"flex flex-wrap justify-between md:px-1 mt-2\">\r\n        <div\r\n          v-for=\"(item, index) in similarProducts\"\r\n          :key=\"item?.uuid\"\r\n          class=\"group relative md:w-[276px] w-[176px] product_item mb-3 hover:shadow-none md:hover:shadow-hero bg-[#D9D9D940] hover:bg-[#D9D9D940] transition-all ease-in-out duration-200 rounded-xl flex flex-col justify-between items-center\"\r\n        >\r\n          <BaseProduct :item=\"item\"></BaseProduct>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useAuthStore } from \"~~/stores/authStore\";\r\nimport { useToast } from \"vue-toastification\";\r\nimport { useFavStore } from \"~~/stores/favourite\";\r\nimport { StorageSerializers } from \"@vueuse/core\";\r\n\r\nconst favStore = useFavStore();\r\n\r\nconst $toast = useToast();\r\n\r\nconst user = useAuthStore();\r\n\r\nconst { locale } = useI18n();\r\n\r\nconst oneProduct = ref(null);\r\nconst similarProducts = ref([]);\r\nconst selectedImg = ref(null);\r\nconst comment = ref(null);\r\nconst oneCountProduct = ref(0);\r\nconst changedOneProduct = ref(null);\r\n\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nconst url = `/api/v1/client/products/product/${route.params.id}?lang=${locale.value}`;\r\nconst lesson = useSessionStorage(url, null, {\r\n  serializer: StorageSerializers.object,\r\n});\r\nconst sendComment = async () => {\r\n  if (!comment.value?.length) {\r\n    return $toast.error(\"kommentariya bosh bolmaly dal\");\r\n  }\r\n  if (!user.userToken?.uuid) {\r\n    return $toast.error(\"Ulgama girin\");\r\n  }\r\n  const { data } = await useMyFetch(`/api/v1/client/comment/create`, {\r\n    method: \"POST\",\r\n    body: {\r\n      product_id: oneProduct.value.uuid,\r\n      user_id: user.userToken?.uuid,\r\n      content: comment.value,\r\n    },\r\n  });\r\n  if (data.value?.status) {\r\n    comment.value = null;\r\n    $toast.success(\"Habarynyz garasylyar\");\r\n  }\r\n};\r\n\r\nconst { data: comments } = await useMyFetch(\r\n  `/api/v1/client/products/product-comment?product_id=${route.params.id}&offset=0&limit=100`\r\n);\r\n\r\nconsole.log(lesson.value, \"lesson.value\");\r\nif (!lesson.value) {\r\n  console.log(lesson.value, \"lesson.value\");\r\n  const { data, error, status } = await useMyFetch(url);\r\n\r\n  if (error.value) {\r\n    throw createError({\r\n      ...error.value,\r\n      statusMessage: `Could not fetch lesson`,\r\n    });\r\n  }\r\n\r\n  lesson.value = data.value;\r\n  if (status.value) {\r\n    oneProduct.value = data.value.data.one_products;\r\n    changedOneProduct.value = data.value.data.one_products;\r\n    selectedImg.value = data.value.data.one_products.images[0];\r\n    data.value.data.products.filter((e, index) => {\r\n      if (data.value.data.one_products.uuid !== e.uuid) {\r\n        similarProducts.value.push(e);\r\n      } else {\r\n        changedOneProduct.value = {\r\n          name: data.value.data.one_products?.name,\r\n          uuid: data.value.data.one_products?.uuid,\r\n          images: data.value.data.one_products?.images[0].img_path,\r\n          price: data.value.data.one_products?.price,\r\n        };\r\n      }\r\n    });\r\n  }\r\n} else {\r\n  oneProduct.value = lesson.value.data.one_products;\r\n  changedOneProduct.value = lesson.value.data.one_products;\r\n  selectedImg.value = lesson.value.data.one_products.images[0];\r\n  lesson.value.data.products.filter((e, index) => {\r\n    if (lesson.value.data.one_products.uuid !== e.uuid) {\r\n      similarProducts.value.push(e);\r\n    } else {\r\n      changedOneProduct.value = {\r\n        name: lesson.value.data.one_products?.name,\r\n        uuid: lesson.value.data.one_products?.uuid,\r\n        images: lesson.value.data.one_products?.images[0].img_path,\r\n        price: lesson.value.data.one_products?.price,\r\n      };\r\n    }\r\n  });\r\n  console.log(`getting from cache`);\r\n}\r\n\r\nfavStore.wish_items?.forEach(async (e) => {\r\n  if (e.uuid == oneProduct.value.uuid) {\r\n    oneProduct.value.isLiked = true;\r\n  } else {\r\n    oneProduct.value.isLiked == false;\r\n  }\r\n});\r\nconst toggleFav = async (e) => {\r\n  // if (user.userToken?.uuid) {\r\n  //   const { data: wish_user } = await useMyFetch(\r\n  //     `/api/v1/client/wish-list?lang=tm&user_id=${user.userToken?.uuid}`\r\n  //   );\r\n  //   if (wish_user.value?.status) {\r\n  //     wish_user.value.data?.filter((e) => {\r\n  //       e.images = e.img_path;\r\n  //     });\r\n  //     favStore.wish_items = wish_user.value.data;\r\n  //   }\r\n  // }\r\n\r\n  if (e.isLiked) {\r\n    e.isLiked = false;\r\n    changedOneProduct.value = {\r\n      name: e?.name,\r\n      uuid: e?.uuid,\r\n      images: e?.images[0].img_path,\r\n      price: e?.price,\r\n    };\r\n\r\n    favStore.removeLocalStorage(changedOneProduct.value);\r\n    if (user.userToken?.uuid) {\r\n      const { data } = await useMyFetch(\r\n        `/api/v1/client/wish-list/delete/${user.userToken?.uuid}/${e.uuid}`,\r\n        {\r\n          method: \"POST\",\r\n        }\r\n      );\r\n    }\r\n  } else {\r\n    e.isLiked = true;\r\n\r\n    changedOneProduct.value = {\r\n      name: e?.name,\r\n      uuid: e?.uuid,\r\n      images: e?.images[0].img_path,\r\n      price: e?.price,\r\n    };\r\n\r\n    if (user.userToken?.uuid) {\r\n      const { data } = useMyFetch(`/api/v1/client/wish-list/create`, {\r\n        method: \"POST\",\r\n        body: {\r\n          product_id: e.uuid,\r\n          user_id: user.userToken?.uuid,\r\n        },\r\n      });\r\n    }\r\n    favStore.setLocalStorage(changedOneProduct.value);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.one_prod {\r\n  view-transition-name: title;\r\n}\r\n.one_img {\r\n  view-transition-name: selected-img;\r\n}\r\n</style>\r\n"],"names":["_a","_withAsyncContext"],"mappings":"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"}