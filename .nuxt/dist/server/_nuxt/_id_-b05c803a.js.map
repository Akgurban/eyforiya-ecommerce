{"version":3,"file":"_id_-b05c803a.js","sources":["../../../../pages/admin/products/edit/[id].vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <div class=\"my-4 font-bold bg-slate-300 p-2\">Haryt gosun</div>\r\n      <div class=\"flex gap-4 justify-between w-full\">\r\n        <div class=\"w-[400px] flex flex-col gap-3\">\r\n          <BaseInput\r\n            name=\"Turkmenca ady\"\r\n            label=\"Turkmenca ady\"\r\n            placeholder=\"Turkmenca ady\"\r\n            v-model=\"name_tm\"\r\n          />\r\n          <BaseInput\r\n            name=\"Rusca ady\"\r\n            label=\"Rusca ady\"\r\n            placeholder=\"Rusca ady\"\r\n            v-model=\"name_ru\"\r\n          />\r\n          <BaseInput\r\n            name=\"inlisce ady\"\r\n            label=\"inlisce ady\"\r\n            placeholder=\"inlisce ady\"\r\n            v-model=\"name_en\"\r\n          />\r\n        </div>\r\n        <div class=\"flex flex-col justify-between gap-3 w-[400px]\">\r\n          <div class=\"flex w-full items-end justify-between\">\r\n            <button\r\n              @click=\"selectedSpec = ''\"\r\n              class=\"bg-red-600 rounded-md text-white h-13 w-13\"\r\n            >\r\n              X\r\n            </button>\r\n            <BaseSelect\r\n              class=\"w-[300px]\"\r\n              v-model=\"selectedSpec\"\r\n              label=\"Yorite kategoriya saylan\"\r\n              :options=\"spec_categories\"\r\n            >\r\n            </BaseSelect>\r\n          </div>\r\n          <BaseSelect\r\n            v-model=\"selectedSub\"\r\n            label=\"kici kategoriya saylan\"\r\n            :options=\"sub_categories\"\r\n          >\r\n          </BaseSelect>\r\n          <BaseSelect\r\n            v-model=\"selectedBrand\"\r\n            label=\"brend saylan\"\r\n            :options=\"brands\"\r\n          >\r\n          </BaseSelect>\r\n        </div>\r\n      </div>\r\n      <div class=\"flex gap-3\">\r\n        <BaseTextarea\r\n          name=\"Turkmence Dusundiris\"\r\n          label=\"Turkmence Dusundiris\"\r\n          placeholder=\"Turkmence Dusundiris \"\r\n          v-model=\"description_tm\"\r\n          class=\"mt-4\"\r\n        />\r\n        <BaseTextarea\r\n          name=\"Rusca Dusundiris\"\r\n          label=\"Rusca Dusundiris\"\r\n          placeholder=\"Rusca Dusundiris \"\r\n          v-model=\"description_ru\"\r\n          class=\"mt-4\"\r\n        />\r\n        <BaseTextarea\r\n          name=\"Englishe Dusundiris\"\r\n          label=\"Englishe Dusundiris\"\r\n          placeholder=\"Englishe Dusundiris \"\r\n          v-model=\"description_en\"\r\n          class=\"mt-4\"\r\n        />\r\n      </div>\r\n      <div class=\"flex gap-3 my-5\">\r\n        <div\r\n          v-for=\"(item, index) in 5\"\r\n          :key=\"index\"\r\n          class=\"flex flex-col w-[200px] gap-2 relative\"\r\n        >\r\n          <BaseImgUpload\r\n            v-if=\"image.length >= index || addedImages.length >= index\"\r\n            class=\"w-[200px]\"\r\n            :currentImg=\"\r\n              addedImages[index]?.img_path\r\n                ? `http://duypbaha.com.tm/api/v1/uploads/images/${addedImages[index].img_path}`\r\n                : null\r\n            \"\r\n            :isChangable=\"addedImages[index]?.img_path ? false : true\"\r\n            v-model=\"image[index]\"\r\n          />\r\n          <div\r\n            @click=\"deleteOneImg(addedImages[index].img_uuid)\"\r\n            v-if=\"addedImages[index]?.img_path\"\r\n            class=\"text-white cursor-pointer hover:bg-red-500 px-2 w-full bg-red-600 mt-auto absolute -bottom-5\"\r\n          >\r\n            Delete\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"flex justify-between mb-30\">\r\n      <BaseInput\r\n        name=\"baha\"\r\n        type=\"number\"\r\n        placeholder=\"Harydyn bahasy Manatda\"\r\n        v-model=\"price\"\r\n      />\r\n      <BaseButton @click=\"addPosts\" class=\"\" type=\"secondary\">\r\n        <button>Harydy Gosh</button>\r\n      </BaseButton>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\ndefinePageMeta({\r\n  layout: \"admin\",\r\n  middleware: [\"auth\"],\r\n});\r\nimport { useUserStore } from \"~~/stores/user\";\r\nimport { useLoaderStore } from \"~~/stores/loader\";\r\n\r\nconst userStore = useUserStore();\r\nconst loaderStore = useLoaderStore();\r\nconst router = useRouter();\r\nconst route = useRoute();\r\n\r\nconst image = ref([]);\r\nconst addedImages = ref([]);\r\n\r\nconst description_tm = ref(null);\r\nconst description_en = ref(null);\r\nconst description_ru = ref(null);\r\n\r\nconst name_tm = ref(null);\r\nconst name_en = ref(null);\r\nconst name_ru = ref(null);\r\n\r\nconst sub_categories = ref(null);\r\nconst spec_categories = ref(null);\r\nconst brands = ref(null);\r\nconst price = ref(null);\r\n\r\nconst selectedSpec = ref(null);\r\nconst selectedSub = ref(null);\r\nconst selectedBrand = ref(null);\r\n\r\nconst getOneProductData = async () => {\r\n  try {\r\n    const { data: sub } = await userStore.getSubCategories();\r\n    const { data: spec } = await userStore.getSpecialCategories();\r\n    const { data: brand } = await userStore.getBrand();\r\n    const { data: product_id } = await userStore.OneProduct(route.params.id);\r\n\r\n    sub_categories.value = sub.value.data;\r\n    spec_categories.value = spec.value.data;\r\n    brands.value = brand.value.data;\r\n    loaderStore.endLoading();\r\n\r\n    (addedImages.value = product_id.value.data.images),\r\n      (name_tm.value = product_id.value.data.name_tm),\r\n      (name_ru.value = product_id.value.data.name_ru),\r\n      (name_en.value = product_id.value.data.name_en),\r\n      (description_tm.value = product_id.value.data.description_tm),\r\n      (description_en.value = product_id.value.data.description_en),\r\n      (description_ru.value = product_id.value.data.description_ru),\r\n      (price.value = +product_id.value.data.price),\r\n      (selectedBrand.value = {\r\n        name: product_id.value.data.brand_name,\r\n        uuid: product_id.value.data.brand_id,\r\n      }),\r\n      (selectedSpec.value = {\r\n        name: product_id.value.data.special_categ_name,\r\n        uuid: product_id.value.data.special_categ_id,\r\n      });\r\n    selectedSub.value = {\r\n      name: product_id.value.data.sub_category_name,\r\n      uuid: product_id.value.data.sub_category_id,\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nconst addPosts = async () => {\r\n  try {\r\n    const { data: onlyProduct, status } = await userStore.editProduct({\r\n      sub_category_id: selectedSub.value?.uuid,\r\n      name_tm: name_tm.value,\r\n      name_ru: name_ru.value,\r\n      name_en: name_en.value,\r\n      description_tm: description_tm.value,\r\n      description_en: description_en.value,\r\n      description_ru: description_ru.value,\r\n      price: +price.value,\r\n      brand_id: selectedBrand.value?.uuid || null,\r\n      special_category_id: selectedSpec.value?.uuid || null,\r\n      uuid: route.params.id,\r\n    });\r\n    if (onlyProduct.value.status) {\r\n      image.value?.forEach(async (e, index) => {\r\n        const form = new FormData();\r\n        form.append(\"product_id\", onlyProduct.value.data);\r\n        form.append(\"img\", image.value[index]);\r\n        const { data, status } = await userStore.addProductImage(form);\r\n        if (status) {\r\n        }\r\n      });\r\n      router.push(\"/admin/products\");\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nconst deleteOneImg = async (e) => {\r\n  try {\r\n    loaderStore.startLoading();\r\n    const { data, status } = await userStore.deleteProductImage(e);\r\n    if (status) {\r\n      await getOneProductData();\r\n      loaderStore.endLoading();\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nawait getOneProductData();\r\n</script>\r\n\r\n<style scoped></style>\r\n"],"names":["status","_withAsyncContext"],"mappings":"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"}