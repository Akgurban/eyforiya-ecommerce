{"version":3,"file":"_id_-54e094ef.js","sources":["../../../../pages/brand_id/[id].vue"],"sourcesContent":["<template>\r\n  <div class=\"2xl:w-[1440px] xl:screen mx-auto\">\r\n    <div class=\"flex justify-between px-3\">\r\n      <div></div>\r\n      <BaseButton\r\n        @click=\"toggleFilter\"\r\n        class=\"self-end w-32 lg:hidden flex justify-between\"\r\n        type=\"secondary\"\r\n        ><p>\r\n          {{ !showFilter ? $t(\"close_filter\") : $t(\"show_filter\") }}\r\n        </p>\r\n        <img src=\"@/assets/images/filter.png\" class=\"inline w-5\" alt=\"\"\r\n      /></BaseButton>\r\n    </div>\r\n\r\n    <div class=\"lead flex gap-5 \">\r\n      <div class=\"md:block hidden w-full 2xl:w-[25%] lg:w-[28%] z-20\">\r\n        <filtered-sidebar\r\n          :show_filter=\"!showFilter\"\r\n          :brands=\"brands.data\"\r\n          :show_cat=\"false\"\r\n          :sub_categories=\"incomedDatas?.sub_categories\"\r\n          @someChange=\"(e) => emittedFromSidebar(e)\"\r\n        />\r\n      </div>\r\n      <div class=\"block md:hidden absolute w-full 2xl:w-[25%] lg:w-[28%]\">\r\n        <filtered-sidebar\r\n          :show_filter=\"showFilter\"\r\n          :show_cat=\"false\"\r\n          :brands=\"brands.data\"\r\n          :sub_categories=\"incomedDatas?.sub_categories\"\r\n          @someChange=\"(e) => emittedFromSidebar(e)\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        style=\"\r\n          width: 96% !important;\r\n          height: auto !important;\r\n          user-select: none !important;\r\n          padding-bottom: 20px !important;\r\n        \"\r\n        class=\"flex flex-wrap gap-3 justify-start mx-auto mt-5\"\r\n      >\r\n        <div\r\n          v-for=\"(item, index) in incomedDatas?.products\"\r\n          :key=\"item\"\r\n          draggable=\"true\"\r\n          class=\"group relative md:w-[266px] w-[176px] product_item mb-3 hover:shadow-none md:hover:shadow-hero hover:bg-[#D9D9D940] transition-all ease-in-out duration-200 rounded-xl flex flex-col justify-between items-center\"\r\n        >\r\n          <BaseProduct :item=\"item\"></BaseProduct>\r\n        </div>\r\n        <div\r\n          v-if=\"!incomedDatas?.products\"\r\n          class=\"mt-20 text-center w-full text-6xl text-gray-500 font-alatsi font-bold\"\r\n        >\r\n          {{ $t(\"no_product\") }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst { $width } = useNuxtApp();\r\nconst { locale, locales } = useI18n();\r\n\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nconst incomedDatas = ref(\"\");\r\nconst showFilter = ref(true);\r\nconst order = ref(\"\");\r\n\r\nconst orderList = ref([\r\n  { code: \"\", name: \"none\" },\r\n  { code: \"asc\", name: \"min_to\" },\r\n  { code: \"desc\", name: \"max_to\" },\r\n]);\r\n\r\nconst active = useState();\r\nasync function emittedFromSidebar(e) {\r\n  console.log(e);\r\n  if (e.brnd?.length) {\r\n    locales.value.forEach((a) => {\r\n      if (a.code == locale.value) {\r\n        router.push({\r\n          path: `${a.code2}/brand_id/${e.brnd[e.brnd.length - 1]}`,\r\n          query: {\r\n            filter: JSON.stringify([`${e.brnd[e.brnd.length - 1]}`]),\r\n            order: e.ord,\r\n          },\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nconst toggleFilter = () => {\r\n  showFilter.value = !showFilter.value;\r\n};\r\nconst refetch = async () => {\r\n  let dataForm = {\r\n    lang: \"tm\",\r\n    //  / \"brand_id\":[\"73fbbb62-c863-47e5-a80b-a7cbd67589f4\"\t,\"031a90c5-a29c-4d38-9f49-10f52c37eb76\"],\r\n    order: route.query.order,\r\n    limit: 20,\r\n    offset: 0,\r\n    criteria: route.params.id,\r\n  };\r\n\r\n  if (route.query?.filter && JSON.parse(route.query?.filter)?.length) {\r\n    dataForm.brand_id = JSON.parse(route.query?.filter);\r\n  }\r\n  if (route.params.id) {\r\n  }\r\n  if (route.query.catId) {\r\n    dataForm.sub_category_id = route.query.catId;\r\n  }\r\n\r\n  const { data, status } = await useMyFetch(\r\n    () => `/api/v1/client/products/brand-products`,\r\n    {\r\n      query: {\r\n        brand_id: route.params.id,\r\n        limit: 10,\r\n        offset: 0,\r\n        lang: \"tm\",\r\n        order: route.query.order,\r\n      },\r\n      // ?brand_id=${route.params.id}&limit=10&offset=0&lang=tm&order=${route.query.order}\r\n    }\r\n  );\r\n  if (status) {\r\n    console.log(data.value, \"poo\");\r\n    incomedDatas.value = data.value?.data;\r\n  }\r\n  var { data: brands } = await useMyFetch(\r\n    `/api/v1/client/products/brands?lang=${locale.value}`\r\n  );\r\n};\r\nawait refetch();\r\n\r\nif (route.query?.filter && incomedDatas.value) {\r\n  incomedDatas.value?.brands?.forEach((e) => {\r\n    JSON.parse(route.query?.filter)?.forEach((item) => {\r\n      if (item == e.uuid) {\r\n        e.selected = true;\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nwatch(\r\n  () => route.query,\r\n  async () => {\r\n    await refetch();\r\n    brands.value.data?.forEach((e) => {\r\n      JSON.parse(route.query?.filter)?.forEach((item) => {\r\n        if (item == e.uuid) {\r\n          e.selected = true;\r\n        }\r\n      });\r\n    });\r\n  }\r\n);\r\n\r\nconst { data: brands } = await useMyFetch(\r\n  `/api/v1/client/products/brands?lang=${locale.value}`\r\n);\r\n</script>\r\n\r\n<style scoped>\r\n.slide-fade-enter-active {\r\n  transition: all 0.2s ease-in;\r\n}\r\n\r\n.slide-fade-leave-active {\r\n  transition: all 0.2s cubic-bezier(1, 0.5, 0.8, 1);\r\n}\r\n\r\n.slide-fade-enter-from,\r\n.slide-fade-leave-to {\r\n  transform: translateX(-20px);\r\n  opacity: 0;\r\n}\r\n\r\n.prod_name.active {\r\n  view-transition-name: title;\r\n}\r\nimg.active {\r\n  view-transition-name: selected-img;\r\n  contain: layout;\r\n}\r\n</style>\r\n<style>\r\n:view-transition-old(title),\r\n:view-transition-new(title) {\r\n  width: auto;\r\n}\r\n</style>\r\n"],"names":["_a","_c","_b","_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA,UAAM,EAAE,QAAQ,YAAY;AAE5B,UAAM,SAAS,UAAS;AACxB,UAAM,QAAQ,SAAQ;AACtB,UAAM,eAAe,IAAI,EAAE;AAC3B,UAAM,aAAa,IAAI,IAAI;AACb,QAAI,EAAE;AAEF,QAAI;AAAA,MACpB,EAAE,MAAM,IAAI,MAAM,OAAQ;AAAA,MAC1B,EAAE,MAAM,OAAO,MAAM,SAAU;AAAA,MAC/B,EAAE,MAAM,QAAQ,MAAM,SAAU;AAAA,IAClC,CAAC;AAEc,aAAQ,aAAC;AACxB,mBAAe,mBAAmB,GAAG;;AACnC,cAAQ,IAAI,CAAC;AACb,WAAIA,MAAA,EAAE,SAAF,gBAAAA,IAAQ,QAAQ;AAClB,gBAAQ,MAAM,QAAQ,CAAC,MAAM;AAC3B,cAAI,EAAE,QAAQ,OAAO,OAAO;AAC1B,mBAAO,KAAK;AAAA,cACV,MAAM,GAAG,EAAE,kBAAkB,EAAE,KAAK,EAAE,KAAK,SAAS,CAAC;AAAA,cACrD,OAAO;AAAA,gBACL,QAAQ,KAAK,UAAU,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,SAAS,CAAC,GAAG,CAAC;AAAA,gBACvD,OAAO,EAAE;AAAA,cACV;AAAA,YACX,CAAS;AAAA,UACF;AAAA,QACP,CAAK;AAAA,MACF;AAAA,IACH;AAEA,UAAM,eAAe,MAAM;AACzB,iBAAW,QAAQ,CAAC,WAAW;AAAA,IACjC;AACA,UAAM,UAAU,YAAY;;AACX,OAAA;AAAA,QACb,MAAM;AAAA;AAAA,QAEN,OAAO,MAAM,MAAM;AAAA,QACnB,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,UAAU,MAAM,OAAO;AAAA,MACvB;AAEF,YAAIA,MAAA,MAAM,UAAN,gBAAAA,IAAa,aAAUC,MAAA,KAAK,OAAMC,MAAA,MAAM,UAAN,gBAAAA,IAAa,MAAM,MAA9B,gBAAAD,IAAiC,SAAQ;AAC9C,aAAK,OAAM,WAAM,UAAN,mBAAa,MAAM;AAAA,MACnD;AACD,UAAI,MAAM,OAAO;AAAI;AAErB,UAAI,MAAM,MAAM,OAAO;AACM,cAAM,MAAM;AAAA,MACxC;AAED,YAAM,EAAE,MAAM,OAAQ,IAAG,MAAM;AAAA,QAC7B,MAAM;AAAA,QACN;AAAA,UACE,OAAO;AAAA,YACL,UAAU,MAAM,OAAO;AAAA,YACvB,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,MAAM;AAAA,YACN,OAAO,MAAM,MAAM;AAAA,UACpB;AAAA;AAAA,QAEF;AAAA,MACL;AACE,UAAI,QAAQ;AACV,gBAAQ,IAAI,KAAK,OAAO,KAAK;AAC7B,qBAAa,SAAQ,UAAK,UAAL,mBAAY;AAAA,MAClC;AACsB,YAAM;AAAA,QAC3B,uCAAuC,OAAO;AAAA,MAC9C;AAAA,IACJ;AACA,IAAM,CAAA,QAAA,SAAA,IAAAE,iBAAA,MAAA,QAAO,CAAC;AAEd,UAAI,WAAM,UAAN,mBAAa,WAAU,aAAa,OAAO;AAC7C,+BAAa,UAAb,mBAAoB,WAApB,mBAA4B,QAAQ,CAAC,MAAM;;AACzC,SAAAD,MAAA,KAAK,OAAMF,MAAA,MAAM,UAAN,gBAAAA,IAAa,MAAM,MAA9B,gBAAAE,IAAiC,QAAQ,CAAC,SAAS;AACjD,cAAI,QAAQ,EAAE,MAAM;AAClB,cAAE,WAAW;AAAA,UACd;AAAA,QACP;AAAA,MACA;AAAA,IACA;AAEA;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,YAAY;;AACV,cAAM,QAAO;AACb,SAAAF,MAAA,OAAO,MAAM,SAAb,gBAAAA,IAAmB,QAAQ,CAAC,MAAM;;AAChC,WAAAE,MAAA,KAAK,OAAMF,MAAA,MAAM,UAAN,gBAAAA,IAAa,MAAM,MAA9B,gBAAAE,IAAiC,QAAQ,CAAC,SAAS;AACjD,gBAAI,QAAQ,EAAE,MAAM;AAClB,gBAAE,WAAW;AAAA,YACd;AAAA,UACT;AAAA,QACA;AAAA,MACG;AAAA,IACH;AAEA,UAAM,EAAE,MAAM,OAAQ,kDAAS;AAAA,MAC7B,uCAAuC,OAAO;AAAA,IAChD,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}