{"version":3,"file":"_id_-40239687.js","sources":["../../../../pages/filtered-product/[id].vue"],"sourcesContent":["<template>\r\n  <div class=\"2xl:w-[1440px] xl:screen mx-auto\">\r\n    <div class=\"flex justify-between\">\r\n      <div></div>\r\n      <BaseButton\r\n        @click=\"toggleFilter\"\r\n        class=\"self-end w-32 lg:hidden flex justify-between\"\r\n        type=\"secondary\"\r\n        ><p>\r\n          {{ !showFilter ? $t(\"close_filter\") : $t(\"show_filter\") }}\r\n        </p>\r\n        <img src=\"@/assets/images/filter.png\" class=\"inline w-5\" alt=\"\"\r\n      /></BaseButton>\r\n    </div>\r\n    <div class=\"flex justify-between gap-5\">\r\n      <div\r\n        class=\"md:block hidden w-full 2xl:w-[25%] lg:w-[28%] z-20 sticky top-60\"\r\n      >\r\n        <filtered-sidebar\r\n          :show_filter=\"!showFilter\"\r\n          :brands=\"incomedDatas?.brands\"\r\n          :sub_categories=\"incomedDatas?.sub_categories\"\r\n          @someChange=\"(e) => emittedFromSidebar(e)\"\r\n        />\r\n      </div>\r\n      <div class=\"block md:hidden absolute w-full 2xl:w-[25%] lg:w-[28%]\">\r\n        <filtered-sidebar\r\n          :show_filter=\"showFilter\"\r\n          :brands=\"incomedDatas?.brands\"\r\n          :sub_categories=\"incomedDatas?.sub_categories\"\r\n          @someChange=\"(e) => emittedFromSidebar(e)\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"w-full\">\r\n        <div\r\n          class=\"flex flex-wrap gap-3 w-full justify-start mx-auto mt-5 px-2 \"\r\n        >\r\n          <div\r\n            v-for=\"(item, index) in incomedDatas?.products\"\r\n            :key=\"item\"\r\n            draggable=\"true\"\r\n            class=\"group relative md:w-[266px] w-[176px] product_item mb-3 hover:shadow-none md:hover:shadow-hero hover:bg-[#D9D9D940] transition-all ease-in-out duration-200 rounded-xl flex flex-col justify-start items-center\"\r\n          >\r\n            <BaseProduct :item=\"item\"></BaseProduct>\r\n          </div>\r\n          <div\r\n            v-if=\"!incomedDatas?.products\"\r\n            class=\"mt-20 text-center w-full text-6xl text-gray-500 font-alatsi font-bold\"\r\n          >\r\n            {{ $t(\"no_product\") }}\r\n          </div>\r\n        </div>\r\n        <div class=\"\" v-if=\"!(count == 1)\">\r\n          <BasePaginate :total-items=\"totalItems\" v-model=\"count\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst { locale, locales } = useI18n();\r\n\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nconst incomedDatas = ref(\"\");\r\nconst count = ref(1);\r\nconst totalItems = ref(15);\r\nconst showFilter = ref(true);\r\n\r\nconst toggleFilter = () => {\r\n  showFilter.value = !showFilter.value;\r\n};\r\n\r\nconst active = useState();\r\nasync function emittedFromSidebar(e) {\r\n  console.log(locale, locales);\r\n  locales.value.forEach((a) => {\r\n    if (a.code == locale.value) {\r\n      console.log(a.code, locale.value);\r\n      router.push({\r\n        path: `${a.code2}/filtered-product/${route.params.id}`,\r\n        query: { filter: JSON.stringify(e.brnd), order: e.ord, catId: e.sub },\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\nconst refetch = async () => {\r\n  let dataForm = {\r\n    category_id: route.params.id,\r\n    lang: locale.value,\r\n    limit: 15,\r\n    offset: count.value - 1,\r\n  };\r\n\r\n  if (route.query?.filter && JSON.parse(route.query?.filter)?.length) {\r\n    dataForm.brand_id = JSON.parse(route.query?.filter);\r\n  }\r\n  if (route.query.order) {\r\n    dataForm.order = route.query.order;\r\n  }\r\n  if (route.query.catId) {\r\n    dataForm.sub_category_id = route.query.catId;\r\n  }\r\n\r\n  const { data, status } = await useMyFetch(\r\n    () => `/api/v1/client/products/product`,\r\n    {\r\n      method: \"POST\",\r\n      body: dataForm,\r\n    }\r\n  );\r\n  if (status) {\r\n    incomedDatas.value = data.value?.data;\r\n    console.log(data.value, \"[]\");\r\n    totalItems.value = data.value?.data?.product_count;\r\n  }\r\n};\r\nawait refetch();\r\n\r\nif (incomedDatas.value) {\r\n  incomedDatas.value?.brands?.forEach((e) => {\r\n    JSON.parse(route.query.filter)?.forEach((item) => {\r\n      if (item == e.uuid) {\r\n        e.selected = true;\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nwatch(\r\n  () => route.query,\r\n  async () => {\r\n    await refetch();\r\n    incomedDatas.value?.brands?.forEach((e) => {\r\n      JSON.parse(route.query?.filter)?.forEach((item) => {\r\n        if (item == e.uuid) {\r\n          e.selected = true;\r\n        }\r\n      });\r\n    });\r\n  }\r\n);\r\nwatch(count, async () => {\r\n  await refetch();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.slide-fade-enter-active {\r\n  transition: all 0.2s ease-in;\r\n}\r\n\r\n.slide-fade-leave-active {\r\n  transition: all 0.2s cubic-bezier(1, 0.5, 0.8, 1);\r\n}\r\n\r\n.slide-fade-enter-from,\r\n.slide-fade-leave-to {\r\n  transform: translateX(-20px);\r\n  opacity: 0;\r\n}\r\n\r\n.prod_name.active {\r\n  view-transition-name: title;\r\n}\r\nimg.active {\r\n  view-transition-name: selected-img;\r\n  contain: layout;\r\n}\r\n</style>\r\n<style>\r\n:view-transition-old(title),\r\n:view-transition-new(title) {\r\n  width: auto;\r\n}\r\n</style>\r\n"],"names":["_a","_b","_withAsyncContext"],"mappings":"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"}