{"version":3,"file":"_id_-643ed509.js","sources":["../../../../pages/search/[id].vue"],"sourcesContent":["<template>\r\n  <div class=\"2xl:w-[1440px] xl:screen mx-auto\">\r\n    <div class=\"flex justify-between\">\r\n      <div></div>\r\n      <BaseButton\r\n        @click=\"toggleFilter\"\r\n        class=\"self-end w-49 lg:hidden flex justify-between\"\r\n        type=\"secondary\"\r\n        ><p>\r\n          {{ showFilter ? $t(\"close_filter\") : $t(\"show_filter\") }}\r\n        </p>\r\n        <img src=\"@/assets/images/filter.png\" class=\"inline w-5\" alt=\"\" />\r\n      </BaseButton>\r\n    </div>\r\n\r\n    <div class=\"lead flex gap-5\">\r\n      <div class=\"md:block hidden w-full 2xl:w-[25%] lg:w-[28%]\">\r\n        <filtered-sidebar\r\n          :brands=\"incomedDatas?.brands\"\r\n          :show_cat=\"false\"\r\n          :sub_categories=\"incomedDatas?.sub_categories\"\r\n          @someChange=\"(e) => emittedFromSidebar(e)\"\r\n        />\r\n      </div>\r\n      <div class=\"md:hidden absolute block w-full 2xl:w-[25%] lg:w-[28%]\">\r\n        <filtered-sidebar\r\n          :show_filter=\"showFilter\"\r\n          :brands=\"incomedDatas?.brands\"\r\n          :show_cat=\"false\"\r\n          :sub_categories=\"incomedDatas?.sub_categories\"\r\n          @someChange=\"(e) => emittedFromSidebar(e)\"\r\n        />\r\n      </div>\r\n      <div class=\"w-full\">\r\n        <div\r\n          style=\"padding-bottom: 20px !important\"\r\n          class=\"flex w-full flex-wrap gap-3 md:justify-start justify-center mt-2 mx-auto\"\r\n        >\r\n          <div\r\n            v-for=\"(item, index) in incomedDatas?.products\"\r\n            :key=\"item\"\r\n            draggable=\"true\"\r\n            class=\"group relative md:w-[266px] w-[176px] product_item mb-3 hover:shadow-none md:hover:shadow-hero hover:bg-[#D9D9D940] transition-all ease-in-out duration-200 rounded-xl flex flex-col justify-between items-center\"\r\n          >\r\n            <BaseProduct :item=\"item\"></BaseProduct>\r\n          </div>\r\n          <div\r\n            v-if=\"!incomedDatas?.products\"\r\n            class=\"mt-20 text-center w-full text-6xl text-gray-500 font-alatsi font-bold\"\r\n          >\r\n            {{ $t(\"no_product\") }}\r\n          </div>\r\n        </div>\r\n        <BasePaginate\r\n          :total-items=\"incomedDatas.product_count\"\r\n          v-model=\"count\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst { $width } = useNuxtApp();\r\nconst { locale, locales } = useI18n();\r\n\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nconst incomedDatas = ref(\"\");\r\nconst totalItems = ref(15);\r\nconst count = ref(1);\r\nconst showFilter = ref(true);\r\nconst order = ref(\"\");\r\n\r\nconst active = useState();\r\nasync function emittedFromSidebar(e) {\r\n  locales.value.forEach((a) => {\r\n    if (a.code == locale.value) {\r\n      router.push({\r\n        path: `${a.code2}/search/${route.params.id}`,\r\n        query: { filter: JSON.stringify(e.brnd), order: e.ord },\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\nconst toggleFilter = () => {\r\n  showFilter.value = !showFilter.value;\r\n};\r\nconst refetch = async () => {\r\n  let dataForm = {\r\n    lang: locale.value,\r\n    //  / \"brand_id\":[\"73fbbb62-c863-47e5-a80b-a7cbd67589f4\"\t,\"031a90c5-a29c-4d38-9f49-10f52c37eb76\"],\r\n    order: route.query.order,\r\n    limit: 15,\r\n    offset: count.value - 1,\r\n    criteria: route.params.id,\r\n  };\r\n\r\n  if (route.query?.filter && JSON.parse(route.query?.filter)?.length) {\r\n    dataForm.brand_id = JSON.parse(route.query?.filter);\r\n  }\r\n  if (route.params.id) {\r\n  }\r\n  if (route.query.catId) {\r\n    dataForm.sub_category_id = route.query.catId;\r\n  }\r\n\r\n  const { data, status } = await useMyFetch(\r\n    () => `/api/v1/client/products/product/search`,\r\n    {\r\n      method: \"POST\",\r\n      body: dataForm,\r\n    }\r\n  );\r\n  if (status) {\r\n    incomedDatas.value = data.value?.data;\r\n  }\r\n};\r\nawait refetch();\r\n\r\nif (route.query?.filter && incomedDatas.value) {\r\n  incomedDatas.value?.brands?.forEach((e) => {\r\n    JSON.parse(route.query?.filter)?.forEach((item) => {\r\n      if (item == e.uuid) {\r\n        e.selected = true;\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nwatch(\r\n  () => route.query,\r\n  async () => {\r\n    await refetch();\r\n    incomedDatas.value?.brands?.forEach((e) => {\r\n      JSON.parse(route.query?.filter)?.forEach((item) => {\r\n        if (item == e.uuid) {\r\n          e.selected = true;\r\n        }\r\n      });\r\n    });\r\n  }\r\n);\r\nwatch(count, async () => {\r\n  await refetch();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.slide-fade-enter-active {\r\n  transition: all 0.2s ease-in;\r\n}\r\n\r\n.slide-fade-leave-active {\r\n  transition: all 0.2s cubic-bezier(1, 0.5, 0.8, 1);\r\n}\r\n\r\n.slide-fade-enter-from,\r\n.slide-fade-leave-to {\r\n  transform: translateX(-20px);\r\n  opacity: 0;\r\n}\r\n\r\n.prod_name.active {\r\n  view-transition-name: title;\r\n}\r\nimg.active {\r\n  view-transition-name: selected-img;\r\n  contain: layout;\r\n}\r\n</style>\r\n<style>\r\n:view-transition-old(title),\r\n:view-transition-new(title) {\r\n  width: auto;\r\n}\r\n</style>\r\n"],"names":["_a","_c","_b","_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA,UAAM,EAAE,QAAQ,YAAY;AAE5B,UAAM,SAAS,UAAS;AACxB,UAAM,QAAQ,SAAQ;AACtB,UAAM,eAAe,IAAI,EAAE;AACR,QAAI,EAAE;AACzB,UAAM,QAAQ,IAAI,CAAC;AACnB,UAAM,aAAa,IAAI,IAAI;AACb,QAAI,EAAE;AAEL,aAAQ,aAAC;AACxB,mBAAe,mBAAmB,GAAG;AACnC,cAAQ,MAAM,QAAQ,CAAC,MAAM;AAC3B,YAAI,EAAE,QAAQ,OAAO,OAAO;AAC1B,iBAAO,KAAK;AAAA,YACV,MAAM,GAAG,EAAE,gBAAgB,MAAM,OAAO;AAAA,YACxC,OAAO,EAAE,QAAQ,KAAK,UAAU,EAAE,IAAI,GAAG,OAAO,EAAE,IAAK;AAAA,UAC/D,CAAO;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAEA,UAAM,eAAe,MAAM;AACzB,iBAAW,QAAQ,CAAC,WAAW;AAAA,IACjC;AACA,UAAM,UAAU,YAAY;;AAC1B,UAAI,WAAW;AAAA,QACb,MAAM,OAAO;AAAA;AAAA,QAEb,OAAO,MAAM,MAAM;AAAA,QACnB,OAAO;AAAA,QACP,QAAQ,MAAM,QAAQ;AAAA,QACtB,UAAU,MAAM,OAAO;AAAA,MAC3B;AAEE,YAAIA,MAAA,MAAM,UAAN,gBAAAA,IAAa,aAAUC,MAAA,KAAK,OAAMC,MAAA,MAAM,UAAN,gBAAAA,IAAa,MAAM,MAA9B,gBAAAD,IAAiC,SAAQ;AAClE,iBAAS,WAAW,KAAK,OAAM,WAAM,UAAN,mBAAa,MAAM;AAAA,MACnD;AACD,UAAI,MAAM,OAAO;AAAI;AAErB,UAAI,MAAM,MAAM,OAAO;AACrB,iBAAS,kBAAkB,MAAM,MAAM;AAAA,MACxC;AAED,YAAM,EAAE,MAAM,OAAQ,IAAG,MAAM;AAAA,QAC7B,MAAM;AAAA,QACN;AAAA,UACE,QAAQ;AAAA,UACR,MAAM;AAAA,QACP;AAAA,MACL;AACE,UAAI,QAAQ;AACV,qBAAa,SAAQ,UAAK,UAAL,mBAAY;AAAA,MAClC;AAAA,IACH;AACA,IAAM,CAAA,QAAA,SAAA,IAAAE,iBAAA,MAAA,QAAO,CAAC;AAEd,UAAI,WAAM,UAAN,mBAAa,WAAU,aAAa,OAAO;AAC7C,+BAAa,UAAb,mBAAoB,WAApB,mBAA4B,QAAQ,CAAC,MAAM;;AACzC,SAAAD,MAAA,KAAK,OAAMF,MAAA,MAAM,UAAN,gBAAAA,IAAa,MAAM,MAA9B,gBAAAE,IAAiC,QAAQ,CAAC,SAAS;AACjD,cAAI,QAAQ,EAAE,MAAM;AAClB,cAAE,WAAW;AAAA,UACd;AAAA,QACP;AAAA,MACA;AAAA,IACA;AAEA;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,YAAY;;AACV,cAAM,QAAO;AACb,SAAAA,OAAAF,MAAA,aAAa,UAAb,gBAAAA,IAAoB,WAApB,gBAAAE,IAA4B,QAAQ,CAAC,MAAM;;AACzC,WAAAA,MAAA,KAAK,OAAMF,MAAA,MAAM,UAAN,gBAAAA,IAAa,MAAM,MAA9B,gBAAAE,IAAiC,QAAQ,CAAC,SAAS;AACjD,gBAAI,QAAQ,EAAE,MAAM;AAClB,gBAAE,WAAW;AAAA,YACd;AAAA,UACT;AAAA,QACA;AAAA,MACG;AAAA,IACH;AACA,UAAM,OAAO,YAAY;AACvB,YAAM,QAAO;AAAA,IACf,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}