{"version":3,"file":"add-6886ee28.js","sources":["../../../../pages/admin/products/add.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"my-4 font-bold bg-slate-300 p-2\">Habar gosun</div>\r\n    <div class=\"flex gap-4 justify-between w-full\">\r\n      <div class=\"w-[400px] flex flex-col gap-3\">\r\n        <BaseInput\r\n          name=\"Turkmenca ady\"\r\n          label=\"Turkmenca ady\"\r\n          placeholder=\"Turkmenca ady\"\r\n          v-model=\"name_tm\"\r\n        />\r\n        <BaseInput\r\n          name=\"Rusca ady\"\r\n          label=\"Rusca ady\"\r\n          placeholder=\"Rusca ady\"\r\n          v-model=\"name_ru\"\r\n        />\r\n        <BaseInput\r\n          name=\"inlisce ady\"\r\n          label=\"inlisce ady\"\r\n          placeholder=\"inlisce ady\"\r\n          v-model=\"name_en\"\r\n        />\r\n      </div>\r\n      <div class=\"flex flex-col justify-between gap-3 w-[400px]\">\r\n        <BaseSelect\r\n          v-model=\"selectedSpec\"\r\n          label=\"Select Special category\"\r\n          :options=\"spec_categories\"\r\n        >\r\n        </BaseSelect>\r\n        <BaseSelect\r\n          v-model=\"selectedSub\"\r\n          label=\"Select Sub Category\"\r\n          :options=\"sub_categories\"\r\n        >\r\n        </BaseSelect>\r\n        <BaseSelect\r\n          v-model=\"selectedBrand\"\r\n          label=\"Select Brand\"\r\n          :options=\"brands\"\r\n        >\r\n        </BaseSelect>\r\n      </div>\r\n    </div>\r\n    <div class=\"flex gap-3\">\r\n      <BaseTextarea\r\n        name=\"Turkmence Dusundiris\"\r\n        label=\"Turkmence Dusundiris\"\r\n        placeholder=\"Turkmence Dusundiris \"\r\n        v-model=\"description_tm\"\r\n        class=\"mt-4\"\r\n      />\r\n      <BaseTextarea\r\n        name=\"Rusca Dusundiris\"\r\n        label=\"Rusca Dusundiris\"\r\n        placeholder=\"Rusca Dusundiris \"\r\n        v-model=\"description_ru\"\r\n        class=\"mt-4\"\r\n      />\r\n      <BaseTextarea\r\n        name=\"English Dusundiris\"\r\n        label=\"English Dusundiris\"\r\n        placeholder=\"English Dusundiris \"\r\n        v-model=\"description_en\"\r\n        class=\"mt-4\"\r\n      />\r\n    </div>\r\n    <div class=\"flex gap-3 my-5\">\r\n      <div\r\n        v-for=\"(item, index) in 5\"\r\n        :key=\"index\"\r\n        class=\"flex flex-col w-[200px] gap-2\"\r\n      >\r\n        <BaseImgUpload\r\n          v-if=\"image.length >= index\"\r\n          class=\"w-[200px]\"\r\n          v-model=\"image[index]\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"flex justify-between mb-30\">\r\n    <BaseInput\r\n      name=\"baha\"\r\n      type=\"number\"\r\n      placeholder=\"Harydyn bahasy Manatda\"\r\n      v-model=\"price\"\r\n    />\r\n    <BaseButton @click=\"addPosts\" class=\"\" type=\"secondary\">\r\n      <button>Harydy Gosh</button>\r\n    </BaseButton>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useUserStore } from \"~~/stores/user\";\r\nimport { useLoaderStore } from \"~~/stores/loader\";\r\n\r\ndefinePageMeta({\r\n  layout: \"admin\",\r\n});\r\nconst userStore = useUserStore();\r\nconst loaderStore = useLoaderStore();\r\n\r\nconst image = ref([]);\r\n\r\nconst description_tm = ref(null);\r\nconst description_en = ref(null);\r\nconst description_ru = ref(null);\r\n\r\nconst router = useRouter();\r\nconst name_tm = ref(null);\r\nconst name_en = ref(null);\r\nconst name_ru = ref(null);\r\n\r\nconst sub_categories = ref(null);\r\nconst spec_categories = ref(null);\r\nconst brands = ref(null);\r\nconst price = ref(null);\r\n\r\nconst selectedSpec = ref(null);\r\nconst selectedSub = ref(null);\r\nconst selectedBrand = ref(null);\r\n\r\ntry {\r\n  const { data: sub } = await userStore.getSubCategories();\r\n  const { data: spec } = await userStore.getSpecialCategories();\r\n  const { data: brand } = await userStore.getBrand();\r\n\r\n  console.log(sub, spec, \"sub Categories\");\r\n  sub_categories.value = sub.data;\r\n  spec_categories.value = spec.data;\r\n  brands.value = brand.data;\r\n} catch (error) {\r\n  console.log(error);\r\n}\r\n\r\nconsole.log(loaderStore, \"loaderStore\");\r\nconst addPosts = async () => {\r\n  try {\r\n    loaderStore.startLoading();\r\n    const { data: onlyProduct } = await userStore.addProduct({\r\n      sub_category_id: selectedSub.value?.uuid || null,\r\n      name_tm: name_tm.value,\r\n      name_ru: name_ru.value,\r\n      name_en: name_en.value,\r\n      description_tm: description_tm.value,\r\n      description_en: description_en.value,\r\n      description_ru: description_ru.value,\r\n      price: +price.value,\r\n      brand_id: selectedBrand.value?.uuid || null,\r\n      special_category_id: selectedSpec.value?.uuid || null,\r\n    });\r\n    if (onlyProduct.status) {\r\n      const form = new FormData();\r\n\r\n      form.append(\"product_id\", onlyProduct.data);\r\n      image.value.forEach(async (e, index) => {\r\n        form.append(\"img\", image.value[index]);\r\n        const { data } = await userStore.addProductImage(form);\r\n        console.log(data, \"image\");\r\n        if (data.status) {\r\n          console.log(data);\r\n        }\r\n      });\r\n      loaderStore.endLoading();\r\n\r\n      router.push(\"/admin/products\");\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nwatch(image.value, () => {\r\n  console.log(image.value, image.value.length, \"images wath\");\r\n});\r\n</script>\r\n\r\n<style scoped></style>\r\n"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA,UAAM,YAAY,aAAY;AAC9B,UAAM,cAAc,eAAc;AAElC,UAAM,QAAQ,IAAI,CAAA,CAAE;AAEpB,UAAM,iBAAiB,IAAI,IAAI;AAC/B,UAAM,iBAAiB,IAAI,IAAI;AAC/B,UAAM,iBAAiB,IAAI,IAAI;AAE/B,UAAM,SAAS,UAAS;AACxB,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,UAAU,IAAI,IAAI;AAExB,UAAM,iBAAiB,IAAI,IAAI;AAC/B,UAAM,kBAAkB,IAAI,IAAI;AAChC,UAAM,SAAS,IAAI,IAAI;AACvB,UAAM,QAAQ,IAAI,IAAI;AAEtB,UAAM,eAAe,IAAI,IAAI;AAC7B,UAAM,cAAc,IAAI,IAAI;AAC5B,UAAM,gBAAgB,IAAI,IAAI;AAE9B,QAAI;AACF,YAAM,EAAE,MAAM,IAAK,kDAAS,UAAU,kBAAiB;AACvD,YAAM,EAAE,MAAM,KAAM,KAAS,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,UAAU,sBAAqB;AAC5D,YAAM,EAAE,MAAM,MAAO,KAAS,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,UAAU,UAAS;AAEjD,cAAQ,IAAI,KAAK,MAAM,gBAAgB;AACvC,qBAAe,QAAQ,IAAI;AAC3B,sBAAgB,QAAQ,KAAK;AAC7B,aAAO,QAAQ,MAAM;AAAA,IACvB,SAAS,OAAP;AACA,cAAQ,IAAI,KAAK;AAAA,IACnB;AAEA,YAAQ,IAAI,aAAa,aAAa;AACtC,UAAM,WAAW,YAAY;;AAC3B,UAAI;AACF,oBAAY,aAAY;AACxB,cAAM,EAAE,MAAM,YAAa,IAAG,MAAM,UAAU,WAAW;AAAA,UACvD,mBAAiB,iBAAY,UAAZ,mBAAmB,SAAQ;AAAA,UAC5C,SAAS,QAAQ;AAAA,UACjB,SAAS,QAAQ;AAAA,UACjB,SAAS,QAAQ;AAAA,UACjB,gBAAgB,eAAe;AAAA,UAC/B,gBAAgB,eAAe;AAAA,UAC/B,gBAAgB,eAAe;AAAA,UAC/B,OAAO,CAAC,MAAM;AAAA,UACd,YAAU,mBAAc,UAAd,mBAAqB,SAAQ;AAAA,UACvC,uBAAqB,kBAAa,UAAb,mBAAoB,SAAQ;AAAA,QACvD,CAAK;AACD,YAAI,YAAY,QAAQ;AACtB,gBAAM,OAAO,IAAI;AAEjB,eAAK,OAAO,cAAc,YAAY,IAAI;AAC1C,gBAAM,MAAM,QAAQ,OAAO,GAAG,UAAU;AACtC,iBAAK,OAAO,OAAO,MAAM,MAAM,KAAK,CAAC;AACrC,kBAAM,EAAE,KAAI,IAAK,MAAM,UAAU,gBAAgB,IAAI;AACrD,oBAAQ,IAAI,MAAM,OAAO;AACzB,gBAAI,KAAK,QAAQ;AACf,sBAAQ,IAAI,IAAI;AAAA,YACjB;AAAA,UACT,CAAO;AACD,sBAAY,WAAU;AAEtB,iBAAO,KAAK,iBAAiB;AAAA,QAC9B;AAAA,MACF,SAAQ,OAAP;AACA,gBAAQ,IAAI,KAAK;AAAA,MAClB;AAAA,IACH;AACA,UAAM,MAAM,OAAO,MAAM;AACvB,cAAQ,IAAI,MAAM,OAAO,MAAM,MAAM,QAAQ,aAAa;AAAA,IAC5D,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}