{"version":3,"file":"base-img-upload-a92bf46a.js","sources":["../../../../components/base/base-img-upload.vue"],"sourcesContent":["<script setup>\r\nconst fileInput = ref(null);\r\nconst img = ref(null);\r\nconst fileChoosen = ref(false);\r\n\r\nconst props = defineProps({\r\n  banner: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  currentImg: {\r\n    type: String,\r\n    default: \"\",\r\n  },\r\n  isChangable: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n});\r\n\r\nonMounted(() => {\r\n  if (!!props.currentImg) {\r\n    img.value.src = props.currentImg;\r\n  }\r\n});\r\n// watch props.currentImg and remove img if it is null\r\nwatch(\r\n  () => props.currentImg,\r\n  (val) => {\r\n    if (!val) {\r\n      img.value.src = \"\";\r\n    }\r\n  }\r\n);\r\n\r\nconst emit = defineEmits([\"update:modelValue\"]);\r\n\r\nfunction showFileUpload() {\r\n  if (props.isChangable) {\r\n    fileInput.value.click();\r\n  }\r\n}\r\n\r\nfunction setImg(event) {\r\n  emit(\"update:modelValue\", event.target.files[0]);\r\n  // read file and set image to img tag\r\n  const file = event.target.files[0];\r\n  const reader = new FileReader();\r\n  reader.onload = (e) => {\r\n    img.value.src = e.target.result;\r\n  };\r\n  reader.readAsDataURL(file);\r\n  fileChoosen.value = true;\r\n}\r\n</script>\r\n<template>\r\n  <div\r\n    @click=\"showFileUpload\"\r\n    class=\"group cursor-pointer border-dashed border-2 flex justify-center items-center bg-white hover:bg-white/50 text-[#ddd] w-full relative\"\r\n    :class=\"banner ? 'h-[25rem]' : 'pt-[56.25%]'\"\r\n    v-bind=\"$attrs\"\r\n  >\r\n    <span\r\n      class=\"w-20 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"\r\n    >\r\n      <IconPlus />\r\n    </span>\r\n    <div\r\n      v-if=\"fileChoosen\"\r\n      class=\"group-hover:block hidden overlay absolute top-0 left-0 bg-black/30 w-full h-full z-[2]\"\r\n    >\r\n      <span\r\n        class=\"w-20 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"\r\n      >\r\n        <IconPlus />\r\n      </span>\r\n      <p\r\n        class=\"absolute top-[70%] left-1/2 transform -translate-x-1/2 -translate-y-1/2 font-bold text-white text-lg\"\r\n        v-if=\"banner\"\r\n      >\r\n        Täze surat goýmak üçin basyň\r\n      </p>\r\n    </div>\r\n\r\n    <img\r\n      ref=\"img\"\r\n      class=\"absolute top-0 left-0 w-full h-full object-cover z-[1]\"\r\n      alt=\"\"\r\n    />\r\n    <input\r\n      @input=\"setImg\"\r\n      ref=\"fileInput\"\r\n      accept=\"image/gif, image/jpeg, image/jpg, image/png\"\r\n      type=\"file\"\r\n      class=\"hidden\"\r\n    />\r\n  </div>\r\n</template>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AACkB,QAAI,IAAI;AAC1B,UAAM,MAAM,IAAI,IAAI;AACpB,UAAM,cAAc,IAAI,KAAK;AAuB7B;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,CAAC,QAAQ;AACP,YAAI,CAAC,KAAK;AACR,cAAI,MAAM,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}