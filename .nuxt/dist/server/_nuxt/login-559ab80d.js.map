{"version":3,"file":"login-559ab80d.js","sources":["../../../../pages/admin/login.vue"],"sourcesContent":["<script setup>\r\nimport { useAdminStore } from \"@/stores/adminStore\";\r\nimport { useLoaderStore } from \"~~/stores/loader\";\r\nimport { useToast } from \"vue-toastification\";\r\nconst loaderStore = useLoaderStore();\r\nconst $toast = useToast();\r\ndefinePageMeta({\r\n  layout: \"default\",\r\n  // middleware: [\"redirect\"],\r\n});\r\nconst user = ref(\"\");\r\nconst password = ref(\"\");\r\nconst pendings = ref(false);\r\nconst isValid = ref(true);\r\nconst admin_store = useAdminStore();\r\nconst router = useRouter();\r\n\r\nasync function login() {\r\n  try {\r\n    // simple data validation\r\n    if (!user.value || !password.value) {\r\n      isValid.value = false;\r\n      return;\r\n    }\r\n\r\n    pendings.value = true;\r\n    const { data, pending, status, error } = await useFetch(\r\n      \"http://duypbaha.com.tm/api/v1/admin/login\",\r\n      {\r\n        method: \"POST\",\r\n        body: {\r\n          user: user.value,\r\n          password: password.value,\r\n        },\r\n      }\r\n    );\r\n    if (data.value.data) {\r\n      admin_store.adminToken = data.value.data;\r\n      router.push(\"/admin/categories\");\r\n    } else if (status) {\r\n      $toast.error(\"kodunyz yalnys :(\");\r\n    }\r\n    pendings.value = false;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n}\r\nconst logout = () => {\r\n  admin_store.adminToken = \"\";\r\n  router.push(\"/\");\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"flex justify-center pt-34 md:pt-40 h-[110vh] absolute top-0 bg-slate-300 z-40 w-full\"\r\n  >\r\n    <BaseButton @click=\"logout\" class=\"absolute top-0 left-0\" type=\"danger\"\r\n      >Logout</BaseButton\r\n    >\r\n    <div class=\"w-full max-w-md\">\r\n      <div\r\n        class=\"text-3xl font-bold text-center mb-6 flex w-full justify-between\"\r\n      ></div>\r\n      <form class=\"bg-c-gray shadow-lg rounded px-8 pt-6 pb-8 mb-4\">\r\n        <img\r\n          class=\"mx-auto md:cursor-pointer cursor-auto\"\r\n          @click=\"router.push(localePath('/'))\"\r\n          src=\"~/assets/images/logo.png\"\r\n          alt=\"\"\r\n        />\r\n\r\n        <div class=\"mb-4\">\r\n          <BaseInput\r\n            label=\"Username\"\r\n            id=\"username\"\r\n            name=\"username\"\r\n            type=\"text\"\r\n            placeholder=\"Username\"\r\n            v-model=\"user\"\r\n          />\r\n        </div>\r\n        <div class=\"mb-6\">\r\n          <BaseInput\r\n            label=\"Password\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            v-model=\"password\"\r\n          />\r\n        </div>\r\n        <p class=\"text-red-500 text-sm inter font-bold mb-4\" v-if=\"!isValid\">\r\n          Please fill all the forms\r\n        </p>\r\n        <div class=\"flex w-full gap-5 items-center justify-between\">\r\n          <button\r\n            class=\"bg-blue-700 w-auto text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n            type=\"button\"\r\n            @click=\"login\"\r\n          >\r\n            Sign In\r\n          </button>\r\n          <p class=\"p-2 rounded-md text-white font-bold\" v-if=\"pendings\">\r\n            <img src=\"@/assets/images/loader.gif\" alt=\"\" />\r\n          </p>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIoB,mBAAiB;AACtB,aAAW;AAK1B,UAAM,OAAO,IAAI,EAAE;AACnB,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,WAAW,IAAI,KAAK;AAC1B,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,cAAc,cAAa;AACjC,UAAM,SAAS,UAAS;AAgCxB,UAAM,SAAS,MAAM;AACnB,kBAAY,aAAa;AACzB,aAAO,KAAK,GAAG;AAAA,IACjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}