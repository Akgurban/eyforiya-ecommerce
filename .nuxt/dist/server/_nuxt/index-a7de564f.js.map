{"version":3,"file":"index-a7de564f.js","sources":["../../../../assets/images/deletecon.svg","../../../../pages/trash/index.vue"],"sourcesContent":["export default \"__VITE_ASSET__e8e5afde__\"","<template>\r\n  <div class=\"2xl:w-[1424px] xl:w-[900px] w-screen mx-auto\">\r\n    <div\r\n      class=\"2xl:w-[1424px] xl:w-[900px] w-screen flex gap-3 items-center pl-10\"\r\n    >\r\n      <NuxtLink to=\"/\" class=\"cursor-pointer hover:font-bold\">Home</NuxtLink>\r\n      <IconChevronRight class=\"h-3\" />\r\n      <p class=\"cursor-pointer font-bold\">Add to cart</p>\r\n    </div>\r\n    <div class=\"w-full\">\r\n      <div class=\"w-full\">\r\n        <div\r\n          class=\"bg-[#3C4242] text-white p-2 md:p-[26px] flex justify-between mt-10 px-3 md:px-10 w-full\"\r\n        >\r\n          <div></div>\r\n          <div class=\"flex justify-between w-full md:text-xl text-[10px]\">\r\n            <p class=\"uppercase\">Product Details</p>\r\n            <p class=\"uppercase\">Quantity</p>\r\n            <p class=\"uppercase\">Price</p>\r\n            <p class=\"uppercase\">Pozmak</p>\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"mt-20 text-center w-full text-6xl text-gray-500 font-alatsi font-bold\"\r\n          v-if=\"!trash.trash_items.products?.length\"\r\n        >\r\n          SebediNiz Bosh\r\n        </div>\r\n        <div\r\n          v-for=\"item in trash.trash_items.products\"\r\n          :key=\"item\"\r\n          class=\"py-12 p-[26px] flex items-center justify-between px-10\"\r\n        >\r\n          <div>\r\n            <div class=\"flex md:flex-row flex-col items-center md:gap-10 gap-5\">\r\n              <img\r\n                @click=\"useRouter().push(`/product/${item?.uuid}`)\"\r\n                :src=\"`http://duypbaha.com.tm/api/v1/uploads/images/${item.images}`\"\r\n                alt=\"\"\r\n                class=\"w-35 rounded-md aspect-square object-cover\"\r\n              />\r\n              <p class=\"font-alatsi md:text-2xl text-lg w-[100px]\">\r\n                {{ item.name }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div\r\n            class=\"flex items-start w-full justify-end gap-1 md:gap-10 md:flex-row flex-row\"\r\n          >\r\n            <div\r\n              class=\"w-[150px] md:w-[400px] flex md:flex-row flex-col items-center justify-start ml-0\"\r\n            >\r\n              <p class=\"uppercase md:w-[200px] w-[150px]\">\r\n                <TrashButtonAndCounter :count=\"item.count\" :item=\"item\" />\r\n              </p>\r\n              <p\r\n                class=\"uppercase font-bold text-lg md:w-[150px] flex flex-nowrap w-[150px]\"\r\n              >\r\n                {{ item?.count * item?.price }} TMT\r\n              </p>\r\n            </div>\r\n            <div @click=\"deleteUserProduct(item)\" class=\"block cursor-pointer\">\r\n              <img class=\"m-1 w-4\" src=\"@/assets/images/deletecon.svg\" alt=\"\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"bg-[#3C4242] text-white py-3 flex md:flex-row flex-col gap-y-4 justify-between w-full md:text-xl px-5 text-[10px]\"\r\n        >\r\n          <div class=\"\">\r\n            <p class=\"uppercase font-bold font-alatsi\">Total Price:</p>\r\n            <p class=\"uppercase font-bold font-inter text-lg\">\r\n              {{ totalPrice }} TMT\r\n            </p>\r\n          </div>\r\n\r\n          <div>\r\n            <p class=\"uppercase font-bold font-alatsi\">Phone number:</p>\r\n            <div\r\n              class=\"flex h-12 items-center justify-center text-black relative bg-white rounded-lg\"\r\n            >\r\n              <div class=\"h-full flex text-lg items-center mx-2\">+993</div>\r\n              <input\r\n                class=\"text-black text-lg bg-white outline-0 border-white\"\r\n                type=\"text\"\r\n                v-model=\"phone\"\r\n                placeholder=\"6522222\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <BaseButton\r\n            @click=\"makeOrder\"\r\n            class=\"rounded-lg text-lg\"\r\n            type=\"secondary\"\r\n            >Sargydy tayyarlamak</BaseButton\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst count = ref(0);\r\nimport { useTrashStore } from \"~~/stores/trash\";\r\nimport { useAuthStore } from \"~~/stores/authStore\";\r\nimport { useToast } from \"vue-toastification\";\r\n\r\nconst { locale } = useI18n();\r\nconst $toast = useToast();\r\n\r\nconst trash = useTrashStore();\r\nconst user = useAuthStore();\r\nconst totalPrice = ref(0);\r\nconst phone = ref(null);\r\nconst calcTotal = () => {\r\n  totalPrice.value = 0;\r\n  trash.trash_items.products?.filter((e) => {\r\n    totalPrice.value += e.price * e.count;\r\n  });\r\n};\r\ncalcTotal();\r\nwatch(trash.trash_items, calcTotal);\r\n\r\nconst deleteUserProduct = async (e) => {\r\n  trash.removeLocalStorage(e, 0);\r\n\r\n  if (user.userToken) {\r\n    const { data, status } = await useMyFetch(\"/api/v1/client/trash/create\", {\r\n      body: {\r\n        user_id: user.userToken?.uuid,\r\n        product_id: e?.uuid,\r\n        count: 0,\r\n      },\r\n      method: \"POST\",\r\n    });\r\n    if (status) {\r\n      if (user.userToken?.uuid) {\r\n        const { data: user_trash } = await useMyFetch(\r\n          `/api/v1/client/trash?user_id=${user.userToken.uuid}&lang=${locale.value}`\r\n        );\r\n        if (user_trash.value.status && user_trash.value?.data?.length) {\r\n          trash.trash_items.products = [];\r\n          user_trash.value?.data?.filter((e) => {\r\n            e.images = e.img_path;\r\n          });\r\n          trash.trash_items.products = user_trash.value?.data;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\nconst setStore = () => {\r\n  trash.setLocalStorage(count.value);\r\n};\r\n\r\nif (user.userToken?.uuid) {\r\n  const { data: user_trash } = await useMyFetch(\r\n    `/api/v1/client/trash?user_id=${user.userToken.uuid}&lang=${locale.value}`\r\n  );\r\n  if (user_trash.value.status && user_trash.value?.data?.length) {\r\n    trash.trash_items.products = [];\r\n    user_trash.value?.data?.filter((e) => {\r\n      e.images = e.img_path;\r\n    });\r\n    trash.trash_items.products = user_trash.value?.data;\r\n  }\r\n}\r\n\r\nconst makeOrder = async () => {\r\n  const making_products = [];\r\n  trash.trash_items.products?.filter((e) => {\r\n    making_products.push({\r\n      product_id: e.uuid,\r\n      count: `${e.count}`,\r\n    });\r\n  });\r\n  if (phone.value?.length == 8) {\r\n    const { data: make_order } = await useMyFetch(\r\n      `/api/v1/client/products/order/create`,\r\n      {\r\n        method: \"POST\",\r\n        body: {\r\n          user_id: user.userToken?.uuid || null,\r\n          phone: `${phone.value}`,\r\n          products: making_products,\r\n        },\r\n      }\r\n    );\r\n    if (make_order.value?.status) {\r\n      trash.trash_items.products = [];\r\n      $toast.success(\"Habarynyz ustunlikli kabul edildi\");\r\n      phone.value = \"\";\r\n      useRouter().push(\"/\");\r\n    }\r\n  } else {\r\n    $toast.error(\"Telefonynyzy dogry dolduryn\");\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"],"names":["_a","_b","_c","_d"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAe,aAAA,KAAA,iBAAA,wBAAA;;;;;;;ACuGD,QAAI,CAAC;AAKnB,UAAM,EAAE,OAAM,IAAK;AACnB,UAAM,SAAS,SAAQ;AAEvB,UAAM,QAAQ,cAAa;AAC3B,UAAM,OAAO,aAAY;AACzB,UAAM,aAAa,IAAI,CAAC;AACxB,UAAM,QAAQ,IAAI,IAAI;AACtB,UAAM,YAAY,MAAM;;AACtB,iBAAW,QAAQ;AACnB,OAAAA,MAAA,MAAM,YAAY,aAAlB,gBAAAA,IAA4B,OAAO,CAAC,MAAM;AACxC,mBAAW,SAAS,EAAE,QAAQ,EAAE;AAAA,MACpC;AAAA,IACA;AACA;AACA,UAAM,MAAM,aAAa,SAAS;AAkClC,SAAI,UAAK,cAAL,mBAAgB,MAAM;AACxB,YAAM,EAAE,MAAM,WAAY,kDAAS;AAAA,QACjC,gCAAgC,KAAK,UAAU,aAAa,OAAO;AAAA,MACvE,CAAE;AACA,UAAI,WAAW,MAAM,YAAU,sBAAW,UAAX,mBAAkB,SAAlB,mBAAwB,SAAQ;AAC7D,cAAM,YAAY,WAAW;AAC7B,+BAAW,UAAX,mBAAkB,SAAlB,mBAAwB,OAAO,CAAC,MAAM;AACpC,YAAE,SAAS,EAAE;AAAA,QACnB;AACI,cAAM,YAAY,YAAW,gBAAW,UAAX,mBAAkB;AAAA,MAChD;AAAA,IACH;AAEA,UAAM,YAAY,YAAY;;AAC5B,YAAM,kBAAkB,CAAA;AACxB,OAAAA,MAAA,MAAM,YAAY,aAAlB,gBAAAA,IAA4B,OAAO,CAAC,MAAM;AACxC,wBAAgB,KAAK;AAAA,UACnB,YAAY,EAAE;AAAA,UACd,OAAO,GAAG,EAAE;AAAA,QAClB,CAAK;AAAA,MACL;AACE,YAAIC,MAAA,MAAM,UAAN,gBAAAA,IAAa,WAAU,GAAG;AAC5B,cAAM,EAAE,MAAM,WAAY,IAAG,MAAM;AAAA,UACjC;AAAA,UACA;AAAA,YACE,QAAQ;AAAA,YACR,MAAM;AAAA,cACJ,WAASC,MAAA,KAAK,cAAL,gBAAAA,IAAgB,SAAQ;AAAA,cACjC,OAAO,GAAG,MAAM;AAAA,cAChB,UAAU;AAAA,YACX;AAAA,UACF;AAAA,QACP;AACI,aAAIC,MAAA,WAAW,UAAX,gBAAAA,IAAkB,QAAQ;AAC5B,gBAAM,YAAY,WAAW;AAC7B,iBAAO,QAAQ,mCAAmC;AAClD,gBAAM,QAAQ;AACd,oBAAW,EAAC,KAAK,GAAG;AAAA,QACrB;AAAA,MACL,OAAS;AACL,eAAO,MAAM,6BAA6B;AAAA,MAC3C;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}