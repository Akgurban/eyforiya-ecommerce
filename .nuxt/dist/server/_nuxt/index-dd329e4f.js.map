{"version":3,"file":"index-dd329e4f.js","sources":["../../../../pages/admin/orders/index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"w-80 flex gap-2 items-center ml-auto\">\r\n      <div\r\n        class=\"text-xl font-bold\"\r\n        :class=\"\r\n          statusValue.name == `tassyklanan` ? 'text-green-700' : 'text-red-500'\r\n        \"\r\n      >\r\n        Yagdayy:\r\n      </div>\r\n      <BaseSelect\r\n        v-model=\"statusValue\"\r\n        :options=\"[{ name: `tassyklanan` }, { name: `garashylyar` }]\"\r\n      ></BaseSelect>\r\n    </div>\r\n    <div class=\"rounded-md p-2 m-1 flex justify-between\">\r\n      <p class=\"font-bold\">Zakazlar</p>\r\n      <BaseButton type=\"\">Pozmak</BaseButton>\r\n    </div>\r\n    <ul>\r\n      <div\r\n        class=\"bg-gray-200 cursor-pointer text-lg font-bold rounded-md p-2 m-1\"\r\n        v-for=\"item in orders\"\r\n        :key=\"item.uuid\"\r\n      >\r\n        <div\r\n          class=\"bg-gray-200 cursor-pointer flex justify-between items-center text-lg font-bold rounded-md p-2 m-1\"\r\n        >\r\n          <p>name: {{ item.username }}</p>\r\n          <p>+993 {{ item.string }}</p>\r\n          <!-- <p>status: {{ item.status }}</p> -->\r\n          <div class=\"flex gap-3\">\r\n            <BaseButton @click=\"setStatus(item)\" type=\"primary\"\r\n              >Status uytget</BaseButton\r\n            >\r\n            <BaseButton @click=\"deleteCategory(item)\" type=\"danger\"\r\n              >Pozmak</BaseButton\r\n            >\r\n          </div>\r\n        </div>\r\n        <ul class=\"pl-10\">\r\n          <li\r\n            class=\"mt-2 odd:bg-gray-50 even:bg-gray-100 cursor-pointer flex justify-between items-center text-lg font-bold rounded-md p-2 m-1\"\r\n            v-for=\"small in item.products\"\r\n            :key=\"small.uuid\"\r\n          >\r\n            <img\r\n              :src=\"`http://duypbaha.com.tm/api/v1/uploads/images/${small?.img_path}`\"\r\n              alt=\"\"\r\n              class=\"h-10 w-15\"\r\n            />\r\n            <p>\r\n              {{ small.product_name }}\r\n            </p>\r\n            <p>{{ small.price }} TMT</p>\r\n            <p>count: {{ small.count }}</p>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <BasePaginate v-model=\"count\" :total-items=\"totalItems\" />\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useUserStore } from \"~~/stores/user\";\r\nimport { useToast } from \"vue-toastification\";\r\n\r\ndefinePageMeta({\r\n  layout: \"admin\",\r\n  middleware: [\"auth\"],\r\n});\r\nconst userStore = useUserStore();\r\nconst $toast = useToast();\r\nconst count = ref(1);\r\nconst totalItems = ref(1);\r\nconst orders = ref(null);\r\nconst router = useRouter();\r\nconst statusValue = ref({ name: `tassyklanan` });\r\n\r\ntry {\r\n  const { data } = await userStore.getOrders({\r\n    limit: 25,\r\n    offset: 0,\r\n    status: statusValue.value.name == `tassyklanan` ? true : false,\r\n  });\r\n  // categories.value = data.value.data;\r\n  orders.value = data.value.data.orders;\r\n} catch (error) {\r\n  console.log(error);\r\n}\r\n\r\nconst getCategoriesr = async () => {\r\n  try {\r\n    const { data } = await userStore.getOrders({\r\n      limit: 15,\r\n      offset: count.value - 1,\r\n      status: statusValue.value.name == `tassyklanan` ? true : false,\r\n    });\r\n    orders.value = data.value.data.orders;\r\n    totalItems.value = data.value.data?.count;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nconst deleteCategory = async (e) => {\r\n  try {\r\n    const { data, status } = await userStore.deleteOrders(e.order_id);\r\n    if (status) {\r\n      $toast.success(\"order deleted!\");\r\n    }\r\n    await getCategoriesr();\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nconst setStatus = async (e) => {\r\n  try {\r\n    const { data, status } = await userStore.updateOrder({\r\n      status: statusValue.value.name !== `tassyklanan` ? true : false,\r\n      uuid: e.order_id,\r\n    });\r\n    if (status) {\r\n      $toast.success(\"Status uytgedi!\");\r\n    }\r\n    await getCategoriesr();\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nwatch(statusValue, async () => {\r\n  await getCategoriesr();\r\n});\r\nwatch(count, async () => {\r\n  await getCategoriesr();\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA,UAAM,YAAY,aAAY;AAC9B,UAAM,SAAS,SAAQ;AACvB,UAAM,QAAQ,IAAI,CAAC;AACnB,UAAM,aAAa,IAAI,CAAC;AACxB,UAAM,SAAS,IAAI,IAAI;AACR,cAAY;AAC3B,UAAM,cAAc,IAAI,EAAE,MAAM,cAAe,CAAA;AAE/C,QAAI;AACF,YAAM,EAAE,KAAM,kDAAS,UAAU,UAAU;AAAA,QACzC,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,QAAQ,YAAY,MAAM,QAAQ,gBAAgB,OAAO;AAAA,MAC7D,CAAG,CAAA;AAED,aAAO,QAAQ,KAAK,MAAM,KAAK;AAAA,IACjC,SAAS,OAAP;AACA,cAAQ,IAAI,KAAK;AAAA,IACnB;AAEA,UAAM,iBAAiB,YAAY;;AACjC,UAAI;AACF,cAAM,EAAE,KAAI,IAAK,MAAM,UAAU,UAAU;AAAA,UACzC,OAAO;AAAA,UACP,QAAQ,MAAM,QAAQ;AAAA,UACtB,QAAQ,YAAY,MAAM,QAAQ,gBAAgB,OAAO;AAAA,QAC/D,CAAK;AACD,eAAO,QAAQ,KAAK,MAAM,KAAK;AAC/B,mBAAW,SAAQ,UAAK,MAAM,SAAX,mBAAiB;AAAA,MACrC,SAAQ,OAAP;AACA,gBAAQ,IAAI,KAAK;AAAA,MAClB;AAAA,IACH;AACA,UAAM,iBAAiB,OAAO,MAAM;AAClC,UAAI;AACF,cAAM,EAAE,MAAM,WAAW,MAAM,UAAU,aAAa,EAAE,QAAQ;AAChE,YAAI,QAAQ;AACV,iBAAO,QAAQ,gBAAgB;AAAA,QAChC;AACD,cAAM,eAAc;AAAA,MACrB,SAAQ,OAAP;AACA,gBAAQ,IAAI,KAAK;AAAA,MAClB;AAAA,IACH;AACA,UAAM,YAAY,OAAO,MAAM;AAC7B,UAAI;AACF,cAAM,EAAE,MAAM,OAAQ,IAAG,MAAM,UAAU,YAAY;AAAA,UACnD,QAAQ,YAAY,MAAM,SAAS,gBAAgB,OAAO;AAAA,UAC1D,MAAM,EAAE;AAAA,QACd,CAAK;AACD,YAAI,QAAQ;AACV,iBAAO,QAAQ,iBAAiB;AAAA,QACjC;AACD,cAAM,eAAc;AAAA,MACrB,SAAQ,OAAP;AACA,gBAAQ,IAAI,KAAK;AAAA,MAClB;AAAA,IACH;AACA,UAAM,aAAa,YAAY;AAC7B,YAAM,eAAc;AAAA,IACtB,CAAC;AACD,UAAM,OAAO,YAAY;AACvB,YAAM,eAAc;AAAA,IACtB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}