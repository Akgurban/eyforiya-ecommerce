{"version":3,"file":"add-cf3a4d60.js","sources":["../../../../components/base/base-video-upload.vue","../../../../pages/admin/videos/add.vue"],"sourcesContent":["<script setup>\r\nconst fileInput = ref(null);\r\nconst img = ref(null);\r\nconst fileChoosen = ref(false);\r\n\r\nconst props = defineProps({\r\n  banner: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  currentImg: {\r\n    type: String,\r\n    default: \"\",\r\n  },\r\n  isChangable: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n});\r\n\r\nonMounted(() => {\r\n  if (!!props.currentImg) {\r\n    img.value.src = props.currentImg;\r\n  }\r\n});\r\n// watch props.currentImg and remove img if it is null\r\nwatch(\r\n  () => props.currentImg,\r\n  (val) => {\r\n    if (!val) {\r\n      img.value.src = \"\";\r\n    }\r\n  }\r\n);\r\n\r\nconst emit = defineEmits([\"update:modelValue\"]);\r\n\r\nfunction showFileUpload() {\r\n  if (props.isChangable) {\r\n    fileInput.value.click();\r\n  }\r\n}\r\n\r\nfunction setImg(event) {\r\n  emit(\"update:modelValue\", event.target.files[0]);\r\n  // read file and set image to img tag\r\n  const file = event.target.files[0];\r\n  const reader = new FileReader();\r\n  reader.onload = (e) => {\r\n    img.value.src = e.target.result;\r\n  };\r\n  reader.readAsDataURL(file);\r\n  fileChoosen.value = true;\r\n}\r\n</script>\r\n<template>\r\n  <div>\r\n    <video\r\n      class=\"w-full aspect-video object-cover z-[1]\"\r\n      controls\r\n      autoplay\r\n      loop\r\n      muted\r\n      ref=\"img\"\r\n      v-if=\"fileChoosen\"\r\n    >\r\n      <source ref=\"img\" alt=\"\" />\r\n    </video>\r\n    <div\r\n      @click=\"showFileUpload\"\r\n      class=\"group cursor-pointer border-dashed border-2 flex justify-center items-center bg-white hover:bg-white/50 text-[#ddd] w-full relative\"\r\n      :class=\"banner ? 'h-[25rem]' : 'pt-[56.25%]'\"\r\n      v-bind=\"$attrs\"\r\n    >\r\n      <span\r\n        class=\"w-20 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"\r\n      >\r\n        <IconPlus />\r\n      </span>\r\n      <div\r\n        v-if=\"fileChoosen\"\r\n        class=\"group-hover:block hidden overlay absolute top-0 left-0 bg-black/30 w-full h-full z-[2]\"\r\n      >\r\n        <span\r\n          class=\"w-20 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"\r\n        >\r\n          <IconPlus />\r\n        </span>\r\n        <p\r\n          class=\"absolute top-[70%] left-1/2 transform -translate-x-1/2 -translate-y-1/2 font-bold text-white text-lg\"\r\n          v-if=\"banner\"\r\n        >\r\n          Täze surat goýmak üçin basyň\r\n        </p>\r\n      </div>\r\n\r\n      <input\r\n        @input=\"setImg\"\r\n        ref=\"fileInput\"\r\n        accept=\"video/*\"\r\n        type=\"file\"\r\n        class=\"hidden\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n","<template>\r\n  <div>\r\n    <div class=\"my-4 font-bold bg-slate-300 p-2\">Banner gosun</div>\r\n\r\n    <div class=\"flex justify-between mt-3 items-end\">\r\n      <div class=\"w-[400px]\">\r\n        <BaseVideoUpload v-model=\"category_img\" />\r\n      </div>\r\n\r\n      <BaseButton @click=\"addCategory\" class=\"\" type=\"secondary\">\r\n        <button>Add Category</button>\r\n      </BaseButton>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useToast } from \"vue-toastification\";\r\n\r\ndefinePageMeta({\r\n  layout: \"admin\",\r\n  middleware: [\"auth\"],\r\n});\r\nimport axios from \"~/plugins/axios\";\r\nimport { useUserStore } from \"~~/stores/user\";\r\nimport { useLoaderStore } from \"~~/stores/loader\";\r\nconst loaderStore = useLoaderStore();\r\n\r\nconst userStore = useUserStore();\r\n\r\nconst image = ref(null);\r\nconst category_tm = ref(null);\r\nconst category_ru = ref(null);\r\nconst category_en = ref(null);\r\nconst category_img = ref(null);\r\nconst $toast = useToast();\r\n\r\nconst description = ref(null);\r\nconst route = useRouter();\r\nwatch(image, () => {});\r\nconst val_tm = (e) => {\r\n  if (e === \"\") {\r\n    return \"dogry dolduryn\";\r\n  }\r\n};\r\nconst val_ru = (e) => {\r\n  if (e === \"\") {\r\n    return \"dogry dolduryn\";\r\n  }\r\n};\r\nconst val_en = (e) => {\r\n  if (e === \"\") {\r\n    return \"dogry dolduryn\";\r\n  }\r\n};\r\nconst addCategory = async () => {\r\n  try {\r\n    if (!category_img.value) {\r\n      $toast.error(\"Maglumatlary doly giriziň!\");\r\n      throw \"Maglumatlary doly giriziň!\";\r\n    }\r\n    const form = new FormData();\r\n\r\n    form.append(\"video\", category_img.value);\r\n    loaderStore.startLoading();\r\n    const { data, pending } = await userStore.addVideos(form);\r\n\r\n    if (!pending.value) {\r\n      loaderStore.endLoading();\r\n    }\r\n    useRouter().push(\"/admin/videos\");\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACkB,QAAI,IAAI;AAC1B,UAAM,MAAM,IAAI,IAAI;AACpB,UAAM,cAAc,IAAI,KAAK;AAuB7B;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,CAAC,QAAQ;AACP,YAAI,CAAC,KAAK;AACR,cAAI,MAAM,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPA,UAAM,cAAc,eAAc;AAElC,UAAM,YAAY,aAAY;AAE9B,UAAM,QAAQ,IAAI,IAAI;AACF,QAAI,IAAI;AACR,QAAI,IAAI;AACR,QAAI,IAAI;AAC5B,UAAM,eAAe,IAAI,IAAI;AAC7B,UAAM,SAAS,SAAQ;AAEH,QAAI,IAAI;AACd,cAAY;AAC1B,UAAM,OAAO,MAAM;AAAA,IAAA,CAAE;AAgBrB,UAAM,cAAc,YAAY;AAC9B,UAAI;AACF,YAAI,CAAC,aAAa,OAAO;AACvB,iBAAO,MAAM,4BAA4B;AACzC,gBAAM;AAAA,QACP;AACD,cAAM,OAAO,IAAI;AAEjB,aAAK,OAAO,SAAS,aAAa,KAAK;AACvC,oBAAY,aAAY;AACxB,cAAM,EAAE,MAAM,QAAS,IAAG,MAAM,UAAU,UAAU,IAAI;AAExD,YAAI,CAAC,QAAQ,OAAO;AAClB,sBAAY,WAAU;AAAA,QACvB;AACD,kBAAW,EAAC,KAAK,eAAe;AAAA,MACjC,SAAQ,OAAP;AACA,gBAAQ,IAAI,KAAK;AAAA,MAClB;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}